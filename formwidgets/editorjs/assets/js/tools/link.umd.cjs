(function($,z){typeof exports=="object"&&typeof module<"u"?module.exports=z():typeof define=="function"&&define.amd?define(z):($=typeof globalThis<"u"?globalThis:$||self,$.LinkTool=z())})(this,function(){"use strict";function $(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var z={exports:{}};(function(A,Y){(function(S,T){A.exports=T()})(window,function(){return function(S){var T={};function w(h){if(T[h])return T[h].exports;var a=T[h]={i:h,l:!1,exports:{}};return S[h].call(a.exports,a,a.exports,w),a.l=!0,a.exports}return w.m=S,w.c=T,w.d=function(h,a,f){w.o(h,a)||Object.defineProperty(h,a,{enumerable:!0,get:f})},w.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},w.t=function(h,a){if(1&a&&(h=w(h)),8&a||4&a&&typeof h=="object"&&h&&h.__esModule)return h;var f=Object.create(null);if(w.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:h}),2&a&&typeof h!="string")for(var r in h)w.d(f,r,function(l){return h[l]}.bind(null,r));return f},w.n=function(h){var a=h&&h.__esModule?function(){return h.default}:function(){return h};return w.d(a,"a",a),a},w.o=function(h,a){return Object.prototype.hasOwnProperty.call(h,a)},w.p="/",w(w.s=18)}([function(S,T,w){S.exports=w(11)},function(S,T){function w(h,a){for(var f=0;f<a.length;f++){var r=a[f];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(h,r.key,r)}}S.exports=function(h,a,f){return a&&w(h.prototype,a),f&&w(h,f),h}},function(S,T){S.exports=function(w,h){(h==null||h>w.length)&&(h=w.length);for(var a=0,f=new Array(h);a<h;a++)f[a]=w[a];return f}},function(S,T,w){var h=w(7),a=w(8),f=w(9),r=w(10);S.exports=function(l){return h(l)||a(l)||f(l)||r()}},function(S,T){function w(h,a,f,r,l,g,y){try{var i=h[g](y),s=i.value}catch(c){return void f(c)}i.done?a(s):Promise.resolve(s).then(r,l)}S.exports=function(h){return function(){var a=this,f=arguments;return new Promise(function(r,l){var g=h.apply(a,f);function y(s){w(g,r,l,y,i,"next",s)}function i(s){w(g,r,l,y,i,"throw",s)}y(void 0)})}}},function(S,T){S.exports=function(w,h){if(!(w instanceof h))throw new TypeError("Cannot call a class as a function")}},function(S,T,w){S.exports=function(h){var a={};function f(r){if(a[r])return a[r].exports;var l=a[r]={i:r,l:!1,exports:{}};return h[r].call(l.exports,l,l.exports,f),l.l=!0,l.exports}return f.m=h,f.c=a,f.d=function(r,l,g){f.o(r,l)||Object.defineProperty(r,l,{enumerable:!0,get:g})},f.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},f.t=function(r,l){if(1&l&&(r=f(r)),8&l||4&l&&typeof r=="object"&&r&&r.__esModule)return r;var g=Object.create(null);if(f.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:r}),2&l&&typeof r!="string")for(var y in r)f.d(g,y,function(i){return r[i]}.bind(null,y));return g},f.n=function(r){var l=r&&r.__esModule?function(){return r.default}:function(){return r};return f.d(l,"a",l),l},f.o=function(r,l){return Object.prototype.hasOwnProperty.call(r,l)},f.p="",f(f.s=3)}([function(h,a){var f;f=function(){return this}();try{f=f||new Function("return this")()}catch{typeof window=="object"&&(f=window)}h.exports=f},function(h,a,f){(function(r){var l=f(2),g=setTimeout;function y(){}function i(n){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if(typeof n!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],_(n,this)}function s(n,e){for(;n._state===3;)n=n._value;n._state!==0?(n._handled=!0,i._immediateFn(function(){var o=n._state===1?e.onFulfilled:e.onRejected;if(o!==null){var u;try{u=o(n._value)}catch(b){return void d(e.promise,b)}c(e.promise,u)}else(n._state===1?c:d)(e.promise,n._value)})):n._deferreds.push(e)}function c(n,e){try{if(e===n)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e=="object"||typeof e=="function")){var o=e.then;if(e instanceof i)return n._state=3,n._value=e,void k(n);if(typeof o=="function")return void _((u=o,b=e,function(){u.apply(b,arguments)}),n)}n._state=1,n._value=e,k(n)}catch(p){d(n,p)}var u,b}function d(n,e){n._state=2,n._value=e,k(n)}function k(n){n._state===2&&n._deferreds.length===0&&i._immediateFn(function(){n._handled||i._unhandledRejectionFn(n._value)});for(var e=0,o=n._deferreds.length;e<o;e++)s(n,n._deferreds[e]);n._deferreds=null}function t(n,e,o){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof e=="function"?e:null,this.promise=o}function _(n,e){var o=!1;try{n(function(u){o||(o=!0,c(e,u))},function(u){o||(o=!0,d(e,u))})}catch(u){if(o)return;o=!0,d(e,u)}}i.prototype.catch=function(n){return this.then(null,n)},i.prototype.then=function(n,e){var o=new this.constructor(y);return s(this,new t(n,e,o)),o},i.prototype.finally=l.a,i.all=function(n){return new i(function(e,o){if(!n||n.length===void 0)throw new TypeError("Promise.all accepts an array");var u=Array.prototype.slice.call(n);if(u.length===0)return e([]);var b=u.length;function p(P,j){try{if(j&&(typeof j=="object"||typeof j=="function")){var F=j.then;if(typeof F=="function")return void F.call(j,function(M){p(P,M)},o)}u[P]=j,--b==0&&e(u)}catch(M){o(M)}}for(var E=0;E<u.length;E++)p(E,u[E])})},i.resolve=function(n){return n&&typeof n=="object"&&n.constructor===i?n:new i(function(e){e(n)})},i.reject=function(n){return new i(function(e,o){o(n)})},i.race=function(n){return new i(function(e,o){for(var u=0,b=n.length;u<b;u++)n[u].then(e,o)})},i._immediateFn=typeof r=="function"&&function(n){r(n)}||function(n){g(n,0)},i._unhandledRejectionFn=function(n){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},a.a=i}).call(this,f(5).setImmediate)},function(h,a,f){a.a=function(r){var l=this.constructor;return this.then(function(g){return l.resolve(r()).then(function(){return g})},function(g){return l.resolve(r()).then(function(){return l.reject(g)})})}},function(h,a,f){function r(t){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(t)}f(4);var l,g,y,i,s,c,d=f(8),k=(g=function(t){return new Promise(function(_,n){t=i(t),t=s(t);var e=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");e.open(t.method,t.url),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(t.headers).forEach(function(u){var b=t.headers[u];e.setRequestHeader(u,b)});var o=t.ratio;e.upload.addEventListener("progress",function(u){var b=Math.round(u.loaded/u.total*100),p=Math.ceil(b*o/100);t.progress(p)},!1),e.addEventListener("progress",function(u){var b=Math.round(u.loaded/u.total*100),p=Math.ceil(b*(100-o)/100)+o;t.progress(p)},!1),e.onreadystatechange=function(){if(e.readyState===4){var u=e.response;try{u=JSON.parse(u)}catch{}var b=d.parseHeaders(e.getAllResponseHeaders()),p={body:u,code:e.status,headers:b};e.status===200?_(p):n(p)}},e.send(t.data)})},y=function(t){return t.method="POST",g(t)},i=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.url&&typeof t.url!="string")throw new Error("Url must be a string");if(t.url=t.url||"",t.method&&typeof t.method!="string")throw new Error("`method` must be a string or null");if(t.method=t.method?t.method.toUpperCase():"GET",t.headers&&r(t.headers)!=="object")throw new Error("`headers` must be an object or null");if(t.headers=t.headers||{},t.type&&(typeof t.type!="string"||!Object.values(l).includes(t.type)))throw new Error("`type` must be taken from module's «contentType» library");if(t.progress&&typeof t.progress!="function")throw new Error("`progress` must be a function or null");if(t.progress=t.progress||function(_){},t.beforeSend=t.beforeSend||function(_){},t.ratio&&typeof t.ratio!="number")throw new Error("`ratio` must be a number");if(t.ratio<0||t.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(t.ratio=t.ratio||90,t.accept&&typeof t.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(t.accept=t.accept||"*/*",t.multiple&&typeof t.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(t.multiple=t.multiple||!1,t.fieldName&&typeof t.fieldName!="string")throw new Error("`fieldName` must be a string");return t.fieldName=t.fieldName||"files",t},s=function(t){switch(t.method){case"GET":var _=c(t.data,l.URLENCODED);delete t.data,t.url=/\?/.test(t.url)?t.url+"&"+_:t.url+"?"+_;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var n=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||l.JSON}(t);(d.isFormData(t.data)||d.isFormElement(t.data))&&(n=l.FORM),t.data=c(t.data,n),n!==k.contentType.FORM&&(t.headers["content-type"]=n)}return t},c=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case l.URLENCODED:return d.urlEncode(t);case l.JSON:return d.jsonEncode(t);case l.FORM:return d.formEncode(t);default:return t}},{contentType:l={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:g,get:function(t){return t.method="GET",g(t)},post:y,transport:function(t){return t=i(t),d.selectFiles(t).then(function(_){for(var n=new FormData,e=0;e<_.length;e++)n.append(t.fieldName,_[e],_[e].name);return d.isObject(t.data)&&Object.keys(t.data).forEach(function(o){var u=t.data[o];n.append(o,u)}),t.beforeSend&&t.beforeSend(_),t.data=n,y(t)})},selectFiles:function(t){return delete(t=i(t)).beforeSend,d.selectFiles(t)}});h.exports=k},function(h,a,f){f.r(a);var r=f(1);window.Promise=window.Promise||r.a},function(h,a,f){(function(r){var l=r!==void 0&&r||typeof self<"u"&&self||window,g=Function.prototype.apply;function y(i,s){this._id=i,this._clearFn=s}a.setTimeout=function(){return new y(g.call(setTimeout,l,arguments),clearTimeout)},a.setInterval=function(){return new y(g.call(setInterval,l,arguments),clearInterval)},a.clearTimeout=a.clearInterval=function(i){i&&i.close()},y.prototype.unref=y.prototype.ref=function(){},y.prototype.close=function(){this._clearFn.call(l,this._id)},a.enroll=function(i,s){clearTimeout(i._idleTimeoutId),i._idleTimeout=s},a.unenroll=function(i){clearTimeout(i._idleTimeoutId),i._idleTimeout=-1},a._unrefActive=a.active=function(i){clearTimeout(i._idleTimeoutId);var s=i._idleTimeout;s>=0&&(i._idleTimeoutId=setTimeout(function(){i._onTimeout&&i._onTimeout()},s))},f(6),a.setImmediate=typeof self<"u"&&self.setImmediate||r!==void 0&&r.setImmediate||this&&this.setImmediate,a.clearImmediate=typeof self<"u"&&self.clearImmediate||r!==void 0&&r.clearImmediate||this&&this.clearImmediate}).call(this,f(0))},function(h,a,f){(function(r,l){(function(g,y){if(!g.setImmediate){var i,s,c,d,k,t=1,_={},n=!1,e=g.document,o=Object.getPrototypeOf&&Object.getPrototypeOf(g);o=o&&o.setTimeout?o:g,{}.toString.call(g.process)==="[object process]"?i=function(p){l.nextTick(function(){b(p)})}:function(){if(g.postMessage&&!g.importScripts){var p=!0,E=g.onmessage;return g.onmessage=function(){p=!1},g.postMessage("","*"),g.onmessage=E,p}}()?(d="setImmediate$"+Math.random()+"$",k=function(p){p.source===g&&typeof p.data=="string"&&p.data.indexOf(d)===0&&b(+p.data.slice(d.length))},g.addEventListener?g.addEventListener("message",k,!1):g.attachEvent("onmessage",k),i=function(p){g.postMessage(d+p,"*")}):g.MessageChannel?((c=new MessageChannel).port1.onmessage=function(p){b(p.data)},i=function(p){c.port2.postMessage(p)}):e&&"onreadystatechange"in e.createElement("script")?(s=e.documentElement,i=function(p){var E=e.createElement("script");E.onreadystatechange=function(){b(p),E.onreadystatechange=null,s.removeChild(E),E=null},s.appendChild(E)}):i=function(p){setTimeout(b,0,p)},o.setImmediate=function(p){typeof p!="function"&&(p=new Function(""+p));for(var E=new Array(arguments.length-1),P=0;P<E.length;P++)E[P]=arguments[P+1];var j={callback:p,args:E};return _[t]=j,i(t),t++},o.clearImmediate=u}function u(p){delete _[p]}function b(p){if(n)setTimeout(b,0,p);else{var E=_[p];if(E){n=!0;try{(function(P){var j=P.callback,F=P.args;switch(F.length){case 0:j();break;case 1:j(F[0]);break;case 2:j(F[0],F[1]);break;case 3:j(F[0],F[1],F[2]);break;default:j.apply(void 0,F)}})(E)}finally{u(p),n=!1}}}}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,f(0),f(7))},function(h,a){var f,r,l=h.exports={};function g(){throw new Error("setTimeout has not been defined")}function y(){throw new Error("clearTimeout has not been defined")}function i(o){if(f===setTimeout)return setTimeout(o,0);if((f===g||!f)&&setTimeout)return f=setTimeout,setTimeout(o,0);try{return f(o,0)}catch{try{return f.call(null,o,0)}catch{return f.call(this,o,0)}}}(function(){try{f=typeof setTimeout=="function"?setTimeout:g}catch{f=g}try{r=typeof clearTimeout=="function"?clearTimeout:y}catch{r=y}})();var s,c=[],d=!1,k=-1;function t(){d&&s&&(d=!1,s.length?c=s.concat(c):k=-1,c.length&&_())}function _(){if(!d){var o=i(t);d=!0;for(var u=c.length;u;){for(s=c,c=[];++k<u;)s&&s[k].run();k=-1,u=c.length}s=null,d=!1,function(b){if(r===clearTimeout)return clearTimeout(b);if((r===y||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(b);try{r(b)}catch{try{return r.call(null,b)}catch{return r.call(this,b)}}}(o)}}function n(o,u){this.fun=o,this.array=u}function e(){}l.nextTick=function(o){var u=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)u[b-1]=arguments[b];c.push(new n(o,u)),c.length!==1||d||i(_)},n.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=e,l.addListener=e,l.once=e,l.off=e,l.removeListener=e,l.removeAllListeners=e,l.emit=e,l.prependListener=e,l.prependOnceListener=e,l.listeners=function(o){return[]},l.binding=function(o){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(o){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(h,a,f){function r(g,y){for(var i=0;i<y.length;i++){var s=y[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(g,s.key,s)}}var l=f(9);h.exports=function(){function g(){(function(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")})(this,g)}var y,i;return y=g,(i=[{key:"urlEncode",value:function(s){return l(s)}},{key:"jsonEncode",value:function(s){return JSON.stringify(s)}},{key:"formEncode",value:function(s){if(this.isFormData(s))return s;if(this.isFormElement(s))return new FormData(s);if(this.isObject(s)){var c=new FormData;return Object.keys(s).forEach(function(d){var k=s[d];c.append(d,k)}),c}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(s){return Object.prototype.toString.call(s)==="[object Object]"}},{key:"isFormData",value:function(s){return s instanceof FormData}},{key:"isFormElement",value:function(s){return s instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(c,d){var k=document.createElement("INPUT");k.type="file",s.multiple&&k.setAttribute("multiple","multiple"),s.accept&&k.setAttribute("accept",s.accept),k.style.display="none",document.body.appendChild(k),k.addEventListener("change",function(t){var _=t.target.files;c(_),document.body.removeChild(k)},!1),k.click()})}},{key:"parseHeaders",value:function(s){var c=s.trim().split(/[\r\n]+/),d={};return c.forEach(function(k){var t=k.split(": "),_=t.shift(),n=t.join(": ");_&&(d[_]=n)}),d}}])&&r(y,i),g}()},function(h,a){var f=function(l){return encodeURIComponent(l).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},r=function(l,g,y,i){return g=g||null,y=y||"&",i=i||null,l?function(s){for(var c=new Array,d=0;d<s.length;d++)s[d]&&c.push(s[d]);return c}(Object.keys(l).map(function(s){var c,d,k=s;if(i&&(k=i+"["+k+"]"),typeof l[s]=="object"&&l[s]!==null)c=r(l[s],null,y,k);else{g&&(d=k,k=!isNaN(parseFloat(d))&&isFinite(d)?g+Number(k):k);var t=l[s];t=(t=(t=(t=t===!0?"1":t)===!1?"0":t)===0?"0":t)||"",c=f(k)+"="+f(t)}return c})).join(y).replace(/[!'()*]/g,""):""};h.exports=r}])},function(S,T,w){var h=w(2);S.exports=function(a){if(Array.isArray(a))return h(a)}},function(S,T){S.exports=function(w){if(typeof Symbol<"u"&&Symbol.iterator in Object(w))return Array.from(w)}},function(S,T,w){var h=w(2);S.exports=function(a,f){if(a){if(typeof a=="string")return h(a,f);var r=Object.prototype.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(a,f):void 0}}},function(S,T){S.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(S,T,w){var h=function(a){var f=Object.prototype,r=f.hasOwnProperty,l=typeof Symbol=="function"?Symbol:{},g=l.iterator||"@@iterator",y=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(v,m,L,C){var x=m&&m.prototype instanceof k?m:k,R=Object.create(x.prototype),U=new F(C||[]);return R._invoke=function(B,D,O){var N="suspendedStart";return function(H,G){if(N==="executing")throw new Error("Generator is already running");if(N==="completed"){if(H==="throw")throw G;return V()}for(O.method=H,O.arg=G;;){var X=O.delegate;if(X){var q=E(X,O);if(q){if(q===d)continue;return q}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(N==="suspendedStart")throw N="completed",O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);N="executing";var I=c(B,D,O);if(I.type==="normal"){if(N=O.done?"completed":"suspendedYield",I.arg===d)continue;return{value:I.arg,done:O.done}}I.type==="throw"&&(N="completed",O.method="throw",O.arg=I.arg)}}}(v,L,U),R}function c(v,m,L){try{return{type:"normal",arg:v.call(m,L)}}catch(C){return{type:"throw",arg:C}}}a.wrap=s;var d={};function k(){}function t(){}function _(){}var n={};n[g]=function(){return this};var e=Object.getPrototypeOf,o=e&&e(e(M([])));o&&o!==f&&r.call(o,g)&&(n=o);var u=_.prototype=k.prototype=Object.create(n);function b(v){["next","throw","return"].forEach(function(m){v[m]=function(L){return this._invoke(m,L)}})}function p(v,m){var L;this._invoke=function(C,x){function R(){return new m(function(U,B){(function D(O,N,H,G){var X=c(v[O],v,N);if(X.type!=="throw"){var q=X.arg,I=q.value;return I&&typeof I=="object"&&r.call(I,"__await")?m.resolve(I.__await).then(function(J){D("next",J,H,G)},function(J){D("throw",J,H,G)}):m.resolve(I).then(function(J){q.value=J,H(q)},function(J){return D("throw",J,H,G)})}G(X.arg)})(C,x,U,B)})}return L=L?L.then(R,R):R()}}function E(v,m){var L=v.iterator[m.method];if(L===void 0){if(m.delegate=null,m.method==="throw"){if(v.iterator.return&&(m.method="return",m.arg=void 0,E(v,m),m.method==="throw"))return d;m.method="throw",m.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var C=c(L,v.iterator,m.arg);if(C.type==="throw")return m.method="throw",m.arg=C.arg,m.delegate=null,d;var x=C.arg;return x?x.done?(m[v.resultName]=x.value,m.next=v.nextLoc,m.method!=="return"&&(m.method="next",m.arg=void 0),m.delegate=null,d):x:(m.method="throw",m.arg=new TypeError("iterator result is not an object"),m.delegate=null,d)}function P(v){var m={tryLoc:v[0]};1 in v&&(m.catchLoc=v[1]),2 in v&&(m.finallyLoc=v[2],m.afterLoc=v[3]),this.tryEntries.push(m)}function j(v){var m=v.completion||{};m.type="normal",delete m.arg,v.completion=m}function F(v){this.tryEntries=[{tryLoc:"root"}],v.forEach(P,this),this.reset(!0)}function M(v){if(v){var m=v[g];if(m)return m.call(v);if(typeof v.next=="function")return v;if(!isNaN(v.length)){var L=-1,C=function x(){for(;++L<v.length;)if(r.call(v,L))return x.value=v[L],x.done=!1,x;return x.value=void 0,x.done=!0,x};return C.next=C}}return{next:V}}function V(){return{value:void 0,done:!0}}return t.prototype=u.constructor=_,_.constructor=t,_[i]=t.displayName="GeneratorFunction",a.isGeneratorFunction=function(v){var m=typeof v=="function"&&v.constructor;return!!m&&(m===t||(m.displayName||m.name)==="GeneratorFunction")},a.mark=function(v){return Object.setPrototypeOf?Object.setPrototypeOf(v,_):(v.__proto__=_,i in v||(v[i]="GeneratorFunction")),v.prototype=Object.create(u),v},a.awrap=function(v){return{__await:v}},b(p.prototype),p.prototype[y]=function(){return this},a.AsyncIterator=p,a.async=function(v,m,L,C,x){x===void 0&&(x=Promise);var R=new p(s(v,m,L,C),x);return a.isGeneratorFunction(m)?R:R.next().then(function(U){return U.done?U.value:R.next()})},b(u),u[i]="Generator",u[g]=function(){return this},u.toString=function(){return"[object Generator]"},a.keys=function(v){var m=[];for(var L in v)m.push(L);return m.reverse(),function C(){for(;m.length;){var x=m.pop();if(x in v)return C.value=x,C.done=!1,C}return C.done=!0,C}},a.values=M,F.prototype={constructor:F,reset:function(v){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!v)for(var m in this)m.charAt(0)==="t"&&r.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=void 0)},stop:function(){this.done=!0;var v=this.tryEntries[0].completion;if(v.type==="throw")throw v.arg;return this.rval},dispatchException:function(v){if(this.done)throw v;var m=this;function L(D,O){return R.type="throw",R.arg=v,m.next=D,O&&(m.method="next",m.arg=void 0),!!O}for(var C=this.tryEntries.length-1;C>=0;--C){var x=this.tryEntries[C],R=x.completion;if(x.tryLoc==="root")return L("end");if(x.tryLoc<=this.prev){var U=r.call(x,"catchLoc"),B=r.call(x,"finallyLoc");if(U&&B){if(this.prev<x.catchLoc)return L(x.catchLoc,!0);if(this.prev<x.finallyLoc)return L(x.finallyLoc)}else if(U){if(this.prev<x.catchLoc)return L(x.catchLoc,!0)}else{if(!B)throw new Error("try statement without catch or finally");if(this.prev<x.finallyLoc)return L(x.finallyLoc)}}}},abrupt:function(v,m){for(var L=this.tryEntries.length-1;L>=0;--L){var C=this.tryEntries[L];if(C.tryLoc<=this.prev&&r.call(C,"finallyLoc")&&this.prev<C.finallyLoc){var x=C;break}}x&&(v==="break"||v==="continue")&&x.tryLoc<=m&&m<=x.finallyLoc&&(x=null);var R=x?x.completion:{};return R.type=v,R.arg=m,x?(this.method="next",this.next=x.finallyLoc,d):this.complete(R)},complete:function(v,m){if(v.type==="throw")throw v.arg;return v.type==="break"||v.type==="continue"?this.next=v.arg:v.type==="return"?(this.rval=this.arg=v.arg,this.method="return",this.next="end"):v.type==="normal"&&m&&(this.next=m),d},finish:function(v){for(var m=this.tryEntries.length-1;m>=0;--m){var L=this.tryEntries[m];if(L.finallyLoc===v)return this.complete(L.completion,L.afterLoc),j(L),d}},catch:function(v){for(var m=this.tryEntries.length-1;m>=0;--m){var L=this.tryEntries[m];if(L.tryLoc===v){var C=L.completion;if(C.type==="throw"){var x=C.arg;j(L)}return x}}throw new Error("illegal catch attempt")},delegateYield:function(v,m,L){return this.delegate={iterator:M(v),resultName:m,nextLoc:L},this.method==="next"&&(this.arg=void 0),d}},a}(S.exports);try{regeneratorRuntime=h}catch{Function("r","regeneratorRuntime = r")(h)}},function(S,T,w){var h=w(13),a=w(14);typeof(a=a.__esModule?a.default:a)=="string"&&(a=[[S.i,a,""]]);var f={insert:"head",singleton:!1};h(a,f),S.exports=a.locals||{}},function(S,T,w){var h,a=function(){return h===void 0&&(h=!!(window&&document&&document.all&&!window.atob)),h},f=function(){var n={};return function(e){if(n[e]===void 0){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch{o=null}n[e]=o}return n[e]}}(),r=[];function l(n){for(var e=-1,o=0;o<r.length;o++)if(r[o].identifier===n){e=o;break}return e}function g(n,e){for(var o={},u=[],b=0;b<n.length;b++){var p=n[b],E=e.base?p[0]+e.base:p[0],P=o[E]||0,j="".concat(E," ").concat(P);o[E]=P+1;var F=l(j),M={css:p[1],media:p[2],sourceMap:p[3]};F!==-1?(r[F].references++,r[F].updater(M)):r.push({identifier:j,updater:_(M,e),references:1}),u.push(j)}return u}function y(n){var e=document.createElement("style"),o=n.attributes||{};if(o.nonce===void 0){var u=w.nc;u&&(o.nonce=u)}if(Object.keys(o).forEach(function(p){e.setAttribute(p,o[p])}),typeof n.insert=="function")n.insert(e);else{var b=f(n.insert||"head");if(!b)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");b.appendChild(e)}return e}var i,s=(i=[],function(n,e){return i[n]=e,i.filter(Boolean).join(`
`)});function c(n,e,o,u){var b=o?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(n.styleSheet)n.styleSheet.cssText=s(e,b);else{var p=document.createTextNode(b),E=n.childNodes;E[e]&&n.removeChild(E[e]),E.length?n.insertBefore(p,E[e]):n.appendChild(p)}}function d(n,e,o){var u=o.css,b=o.media,p=o.sourceMap;if(b?n.setAttribute("media",b):n.removeAttribute("media"),p&&btoa&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(p))))," */")),n.styleSheet)n.styleSheet.cssText=u;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(u))}}var k=null,t=0;function _(n,e){var o,u,b;if(e.singleton){var p=t++;o=k||(k=y(e)),u=c.bind(null,o,p,!1),b=c.bind(null,o,p,!0)}else o=y(e),u=d.bind(null,o,e),b=function(){(function(E){if(E.parentNode===null)return!1;E.parentNode.removeChild(E)})(o)};return u(n),function(E){if(E){if(E.css===n.css&&E.media===n.media&&E.sourceMap===n.sourceMap)return;u(n=E)}else b()}}S.exports=function(n,e){(e=e||{}).singleton||typeof e.singleton=="boolean"||(e.singleton=a());var o=g(n=n||[],e);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var b=0;b<o.length;b++){var p=l(o[b]);r[p].references--}for(var E=g(u,e),P=0;P<o.length;P++){var j=l(o[P]);r[j].references===0&&(r[j].updater(),r.splice(j,1))}o=E}}}},function(S,T,w){(T=w(15)(!1)).push([S.i,`.link-tool {
  position: relative;
}

  .link-tool__input {
    padding-left: 38px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none'%3E%3Cpath stroke='%23707684' stroke-linecap='round' stroke-width='2' d='m7.7 12.6-.021.02a2.795 2.795 0 0 0-.044 4.005v0a2.795 2.795 0 0 0 3.936.006l1.455-1.438a3 3 0 0 0 .34-3.866l-.146-.207'/%3E%3Cpath stroke='%23707684' stroke-linecap='round' stroke-width='2' d='m16.22 11.12.136-.14c.933-.954.992-2.46.135-3.483v0a2.597 2.597 0 0 0-3.664-.32L11.39 8.386a3 3 0 0 0-.301 4.3l.031.034'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: 10px;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
  }

  .link-tool__input-holder {
      position: relative;
    }

  .link-tool__input-holder--error .link-tool__input {
          background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none'%3E%3Cpath stroke='rgb(224, 147, 147)' stroke-linecap='round' stroke-width='2' d='m7.7 12.6-.021.02a2.795 2.795 0 0 0-.044 4.005v0a2.795 2.795 0 0 0 3.936.006l1.455-1.438a3 3 0 0 0 .34-3.866l-.146-.207'/%3E%3Cpath stroke='rgb(224, 147, 147)' stroke-linecap='round' stroke-width='2' d='m16.22 11.12.136-.14c.933-.954.992-2.46.135-3.483v0a2.597 2.597 0 0 0-3.664-.32L11.39 8.386a3 3 0 0 0-.301 4.3l.031.034'/%3E%3C/svg%3E");
          background-color: #fff3f6;
          border-color: #f3e0e0;
          color: #a95a5a;
          box-shadow: inset 0 1px 3px 0 rgba(146, 62, 62, .05);
        }

  .link-tool__input[contentEditable=true][data-placeholder]::before{
      position: absolute;
      content: attr(data-placeholder);
      color: #707684;
      font-weight: normal;
      opacity: 0;
    }

  .link-tool__input[contentEditable=true][data-placeholder]:empty::before {
        opacity: 1;
      }

  .link-tool__input[contentEditable=true][data-placeholder]:empty:focus::before {
         opacity: 0;
       }

  .link-tool__progress {
    position: absolute;
    box-shadow: inset 0 1px 3px 0 rgba(102, 85, 107, 0.04);
    height: 100%;
    width: 0;
    background-color: #f4f5f7;
    z-index: -1;
  }

  .link-tool__progress--loading {
      -webkit-animation: progress 500ms ease-in;
      -webkit-animation-fill-mode: forwards;
    }

  .link-tool__progress--loaded {
      width: 100%;
    }

  .link-tool__content {
    display: block;
    padding: 25px;
    border-radius: 2px;
    box-shadow: 0 0 0 2px #fff;
    color: initial !important;
    text-decoration: none !important;
  }

  .link-tool__content::after {
      content: "";
      clear: both;
      display: table;
    }

  .link-tool__content--rendered {
      background: #fff;
      border: 1px solid rgba(201, 201, 204, 0.48);
      box-shadow: 0 1px 3px rgba(0,0,0, .1);
      border-radius: 6px;
      will-change: filter;
      animation: link-in 450ms 1 cubic-bezier(0.215, 0.61, 0.355, 1);
    }

  .link-tool__content--rendered:hover {
        box-shadow: 0 0 3px rgba(0,0,0, .16);
      }

  .link-tool__image {
    background-position: center center;
    background-repeat: no-repeat;
    background-size: cover;
    margin: 0 0 0 30px;
    width: 65px;
    height: 65px;
    border-radius: 3px;
    float: right;
  }

  .link-tool__title {
    font-size: 17px;
    font-weight: 600;
    line-height: 1.5em;
    margin: 0 0 10px 0;
  }

  .link-tool__title + .link-tool__anchor {
      margin-top: 25px;
    }

  .link-tool__description {
    margin: 0 0 20px 0;
    font-size: 15px;
    line-height: 1.55em;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .link-tool__anchor {
    display: block;
    font-size: 15px;
    line-height: 1em;
    color: #888 !important;
    border: 0 !important;
    padding: 0 !important;
  }

@keyframes link-in {
  from {
    filter: blur(5px);
  }

  to {
    filter: none;
  }
}

.codex-editor--narrow .link-tool__image {
  display: none;
}

@-webkit-keyframes progress {
  0% {
    width: 0;
  }
  100% {
    width: 85%;
  }
}
`,""]),S.exports=T},function(S,T,w){S.exports=function(h){var a=[];return a.toString=function(){return this.map(function(f){var r=function(l,g){var y=l[1]||"",i=l[3];if(!i)return y;if(g&&typeof btoa=="function"){var s=(d=i,k=btoa(unescape(encodeURIComponent(JSON.stringify(d)))),t="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(k),"/*# ".concat(t," */")),c=i.sources.map(function(_){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(_," */")});return[y].concat(c).concat([s]).join(`
`)}var d,k,t;return[y].join(`
`)}(f,h);return f[2]?"@media ".concat(f[2]," {").concat(r,"}"):r}).join("")},a.i=function(f,r,l){typeof f=="string"&&(f=[[null,f,""]]);var g={};if(l)for(var y=0;y<this.length;y++){var i=this[y][0];i!=null&&(g[i]=!0)}for(var s=0;s<f.length;s++){var c=[].concat(f[s]);l&&g[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),a.push(c))}},a}},function(S,T,w){(function(h){(function(a){var f=function(){try{return!!Symbol.iterator}catch{return!1}}(),r=function(i){var s={next:function(){var c=i.shift();return{done:c===void 0,value:c}}};return f&&(s[Symbol.iterator]=function(){return s}),s},l=function(i){return encodeURIComponent(i).replace(/%20/g,"+")},g=function(i){return decodeURIComponent(String(i).replace(/\+/g," "))};(function(){try{var i=a.URLSearchParams;return new i("?a=1").toString()==="a=1"&&typeof i.prototype.set=="function"}catch{return!1}})()||function(){var i=function(c){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var d=typeof c;if(d!=="undefined")if(d==="string")c!==""&&this._fromString(c);else if(c instanceof i){var k=this;c.forEach(function(e,o){k.append(o,e)})}else{if(c===null||d!=="object")throw new TypeError("Unsupported input's type for URLSearchParams");if(Object.prototype.toString.call(c)==="[object Array]")for(var t=0;t<c.length;t++){var _=c[t];if(Object.prototype.toString.call(_)!=="[object Array]"&&_.length===2)throw new TypeError("Expected [string, any] as entry at index "+t+" of URLSearchParams's input");this.append(_[0],_[1])}else for(var n in c)c.hasOwnProperty(n)&&this.append(n,c[n])}},s=i.prototype;s.append=function(c,d){c in this._entries?this._entries[c].push(String(d)):this._entries[c]=[String(d)]},s.delete=function(c){delete this._entries[c]},s.get=function(c){return c in this._entries?this._entries[c][0]:null},s.getAll=function(c){return c in this._entries?this._entries[c].slice(0):[]},s.has=function(c){return c in this._entries},s.set=function(c,d){this._entries[c]=[String(d)]},s.forEach=function(c,d){var k;for(var t in this._entries)if(this._entries.hasOwnProperty(t)){k=this._entries[t];for(var _=0;_<k.length;_++)c.call(d,k[_],t,this)}},s.keys=function(){var c=[];return this.forEach(function(d,k){c.push(k)}),r(c)},s.values=function(){var c=[];return this.forEach(function(d){c.push(d)}),r(c)},s.entries=function(){var c=[];return this.forEach(function(d,k){c.push([k,d])}),r(c)},f&&(s[Symbol.iterator]=s.entries),s.toString=function(){var c=[];return this.forEach(function(d,k){c.push(l(k)+"="+l(d))}),c.join("&")},a.URLSearchParams=i}();var y=a.URLSearchParams.prototype;typeof y.sort!="function"&&(y.sort=function(){var i=this,s=[];this.forEach(function(d,k){s.push([k,d]),i._entries||i.delete(k)}),s.sort(function(d,k){return d[0]<k[0]?-1:d[0]>k[0]?1:0}),i._entries&&(i._entries={});for(var c=0;c<s.length;c++)this.append(s[c][0],s[c][1])}),typeof y._fromString!="function"&&Object.defineProperty(y,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(i){if(this._entries)this._entries={};else{var s=[];this.forEach(function(t,_){s.push(_)});for(var c=0;c<s.length;c++)this.delete(s[c])}var d,k=(i=i.replace(/^\?/,"")).split("&");for(c=0;c<k.length;c++)d=k[c].split("="),this.append(g(d[0]),d.length>1?g(d[1]):"")}})})(h!==void 0?h:typeof window<"u"?window:typeof self<"u"?self:this),function(a){if(function(){try{var r=new a.URL("b","http://a");return r.pathname="c d",r.href==="http://a/c%20d"&&r.searchParams}catch{return!1}}()||function(){var r=a.URL,l=function(y,i){typeof y!="string"&&(y=String(y));var s,c=document;if(i&&(a.location===void 0||i!==a.location.href)){(s=(c=document.implementation.createHTMLDocument("")).createElement("base")).href=i,c.head.appendChild(s);try{if(s.href.indexOf(i)!==0)throw new Error(s.href)}catch(u){throw new Error("URL unable to set base "+i+" due to "+u)}}var d=c.createElement("a");d.href=y,s&&(c.body.appendChild(d),d.href=d.href);var k=c.createElement("input");if(k.type="url",k.value=y,d.protocol===":"||!/:/.test(d.href)||!k.checkValidity()&&!i)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:d});var t=new a.URLSearchParams(this.search),_=!0,n=!0,e=this;["append","delete","set"].forEach(function(u){var b=t[u];t[u]=function(){b.apply(t,arguments),_&&(n=!1,e.search=t.toString(),n=!0)}}),Object.defineProperty(this,"searchParams",{value:t,enumerable:!0});var o=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==o&&(o=this.search,n&&(_=!1,this.searchParams._fromString(this.search),_=!0))}})},g=l.prototype;["hash","host","hostname","port","protocol"].forEach(function(y){(function(i){Object.defineProperty(g,i,{get:function(){return this._anchorElement[i]},set:function(s){this._anchorElement[i]=s},enumerable:!0})})(y)}),Object.defineProperty(g,"search",{get:function(){return this._anchorElement.search},set:function(y){this._anchorElement.search=y,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(g,{toString:{get:function(){var y=this;return function(){return y.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(y){this._anchorElement.href=y,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(y){this._anchorElement.pathname=y},enumerable:!0},origin:{get:function(){var y={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],i=this._anchorElement.port!=y&&this._anchorElement.port!=="";return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(i?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(y){},enumerable:!0},username:{get:function(){return""},set:function(y){},enumerable:!0}}),l.createObjectURL=function(y){return r.createObjectURL.apply(r,arguments)},l.revokeObjectURL=function(y){return r.revokeObjectURL.apply(r,arguments)},a.URL=l}(),a.location!==void 0&&!("origin"in a.location)){var f=function(){return a.location.protocol+"//"+a.location.hostname+(a.location.port?":"+a.location.port:"")};try{Object.defineProperty(a.location,"origin",{get:f,enumerable:!0})}catch{setInterval(function(){a.location.origin=f()},100)}}}(h!==void 0?h:typeof window<"u"?window:typeof self<"u"?self:this)}).call(this,w(17))},function(S,T){var w;w=function(){return this}();try{w=w||new Function("return this")()}catch{typeof window=="object"&&(w=window)}S.exports=w},function(S,T,w){w.r(T),w.d(T,"default",function(){return t});var h=w(3),a=w.n(h),f=w(0),r=w.n(f),l=w(4),g=w.n(l),y=w(5),i=w.n(y),s=w(1),c=w.n(s),d=(w(12),w(16),w(6)),k=w.n(d),t=function(){function _(e){var o=e.data,u=e.config,b=e.api,p=e.readOnly;i()(this,_),this.api=b,this.readOnly=p,this.config={endpoint:u.endpoint||"",headers:u.headers||{}},this.nodes={wrapper:null,container:null,progress:null,input:null,inputHolder:null,linkContent:null,linkImage:null,linkTitle:null,linkDescription:null,linkText:null},this._data={link:"",meta:{}},this.data=o}var n;return c()(_,null,[{key:"isReadOnlySupported",get:function(){return!0}},{key:"toolbox",get:function(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.569 6.39509 13.9269 6.25143 12.8271 7.17675L11.39 8.38588C10.0935 9.47674 9.95704 11.4241 11.0887 12.6852L11.12 12.72"/></svg>',title:"Link"}}},{key:"enableLineBreaks",get:function(){return!0}}]),c()(_,[{key:"render",value:function(){return this.nodes.wrapper=this.make("div",this.CSS.baseClass),this.nodes.container=this.make("div",this.CSS.container),this.nodes.inputHolder=this.makeInputHolder(),this.nodes.linkContent=this.prepareLinkPreview(),Object.keys(this.data.meta).length?(this.nodes.container.appendChild(this.nodes.linkContent),this.showLinkPreview(this.data.meta)):this.nodes.container.appendChild(this.nodes.inputHolder),this.nodes.wrapper.appendChild(this.nodes.container),this.nodes.wrapper}},{key:"save",value:function(){return this.data}},{key:"validate",value:function(){return this.data.link.trim()!==""}},{key:"makeInputHolder",value:function(){var e=this,o=this.make("div",this.CSS.inputHolder);return this.nodes.progress=this.make("label",this.CSS.progress),this.nodes.input=this.make("div",[this.CSS.input,this.CSS.inputEl],{contentEditable:!this.readOnly}),this.nodes.input.dataset.placeholder=this.api.i18n.t("Link"),this.readOnly||(this.nodes.input.addEventListener("paste",function(u){e.startFetching(u)}),this.nodes.input.addEventListener("keydown",function(u){var b=u.ctrlKey||u.metaKey;switch(u.keyCode){case 13:u.preventDefault(),u.stopPropagation(),e.startFetching(u);break;case 65:b&&e.selectLinkUrl(u)}})),o.appendChild(this.nodes.progress),o.appendChild(this.nodes.input),o}},{key:"startFetching",value:function(e){var o=this.nodes.input.textContent;e.type==="paste"&&(o=(e.clipboardData||window.clipboardData).getData("text")),this.removeErrorStyle(),this.fetchLinkData(o)}},{key:"removeErrorStyle",value:function(){this.nodes.inputHolder.classList.remove(this.CSS.inputError),this.nodes.inputHolder.insertBefore(this.nodes.progress,this.nodes.input)}},{key:"selectLinkUrl",value:function(e){e.preventDefault(),e.stopPropagation();var o=window.getSelection(),u=new Range,b=o.anchorNode.parentNode.closest(".".concat(this.CSS.inputHolder)).querySelector(".".concat(this.CSS.inputEl));u.selectNodeContents(b),o.removeAllRanges(),o.addRange(u)}},{key:"prepareLinkPreview",value:function(){var e=this.make("a",this.CSS.linkContent,{target:"_blank",rel:"nofollow noindex noreferrer"});return this.nodes.linkImage=this.make("div",this.CSS.linkImage),this.nodes.linkTitle=this.make("div",this.CSS.linkTitle),this.nodes.linkDescription=this.make("p",this.CSS.linkDescription),this.nodes.linkText=this.make("span",this.CSS.linkText),e}},{key:"showLinkPreview",value:function(e){var o=e.image,u=e.title,b=e.description;this.nodes.container.appendChild(this.nodes.linkContent),o&&o.url&&(this.nodes.linkImage.style.backgroundImage="url("+o.url+")",this.nodes.linkContent.appendChild(this.nodes.linkImage)),u&&(this.nodes.linkTitle.textContent=u,this.nodes.linkContent.appendChild(this.nodes.linkTitle)),b&&(this.nodes.linkDescription.textContent=b,this.nodes.linkContent.appendChild(this.nodes.linkDescription)),this.nodes.linkContent.classList.add(this.CSS.linkContentRendered),this.nodes.linkContent.setAttribute("href",this.data.link),this.nodes.linkContent.appendChild(this.nodes.linkText);try{this.nodes.linkText.textContent=new URL(this.data.link).hostname}catch{this.nodes.linkText.textContent=this.data.link}}},{key:"showProgress",value:function(){this.nodes.progress.classList.add(this.CSS.progressLoading)}},{key:"hideProgress",value:function(){var e=this;return new Promise(function(o){e.nodes.progress.classList.remove(e.CSS.progressLoading),e.nodes.progress.classList.add(e.CSS.progressLoaded),setTimeout(o,500)})}},{key:"applyErrorStyle",value:function(){this.nodes.inputHolder.classList.add(this.CSS.inputError),this.nodes.progress.remove()}},{key:"fetchLinkData",value:(n=g()(r.a.mark(function e(o){var u,b;return r.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return this.showProgress(),this.data={link:o},p.prev=2,p.next=5,k.a.get({url:this.config.endpoint,headers:this.config.headers,data:{url:o}});case 5:u=p.sent,b=u.body,this.onFetch(b),p.next=13;break;case 10:p.prev=10,p.t0=p.catch(2),this.fetchingFailed(this.api.i18n.t("Couldn't fetch the link data"));case 13:case"end":return p.stop()}},e,this,[[2,10]])})),function(e){return n.apply(this,arguments)})},{key:"onFetch",value:function(e){var o=this;if(e&&e.success){var u=e.meta,b=e.link||this.data.link;this.data={meta:u,link:b},u?this.hideProgress().then(function(){o.nodes.inputHolder.remove(),o.showLinkPreview(u)}):this.fetchingFailed(this.api.i18n.t("Wrong response format from the server"))}else this.fetchingFailed(this.api.i18n.t("Couldn't get this link data, try the other one"))}},{key:"fetchingFailed",value:function(e){this.api.notifier.show({message:e,style:"error"}),this.applyErrorStyle()}},{key:"make",value:function(e){var o,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=document.createElement(e);Array.isArray(u)?(o=p.classList).add.apply(o,a()(u)):u&&p.classList.add(u);for(var E in b)p[E]=b[E];return p}},{key:"data",set:function(e){this._data=Object.assign({},{link:e.link||this._data.link,meta:e.meta||this._data.meta})},get:function(){return this._data}},{key:"CSS",get:function(){return{baseClass:this.api.styles.block,input:this.api.styles.input,container:"link-tool",inputEl:"link-tool__input",inputHolder:"link-tool__input-holder",inputError:"link-tool__input-holder--error",linkContent:"link-tool__content",linkContentRendered:"link-tool__content--rendered",linkImage:"link-tool__image",linkTitle:"link-tool__title",linkDescription:"link-tool__description",linkText:"link-tool__anchor",progress:"link-tool__progress",progressLoading:"link-tool__progress--loading",progressLoaded:"link-tool__progress--loaded"}}}]),_}()}]).default})})(z);var K=z.exports;return $(K)});
