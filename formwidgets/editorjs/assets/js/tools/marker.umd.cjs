(function(S,k){typeof exports=="object"&&typeof module<"u"?module.exports=k():typeof define=="function"&&define.amd?define(k):(S=typeof globalThis<"u"?globalThis:S||self,S.Marker=k())})(this,function(){"use strict";function S(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}var k={exports:{}};(function(w,H){(function(b,y){w.exports=y()})(window,function(){return function(b){var y={};function a(t){if(y[t])return y[t].exports;var o=y[t]={i:t,l:!1,exports:{}};return b[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=b,a.c=y,a.d=function(t,o,h){a.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:h})},a.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,o){if(1&o&&(t=a(t)),8&o||4&o&&typeof t=="object"&&t&&t.__esModule)return t;var h=Object.create(null);if(a.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:t}),2&o&&typeof t!="string")for(var p in t)a.d(h,p,function(i){return t[i]}.bind(null,p));return h},a.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(o,"a",o),o},a.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},a.p="/",a(a.s=5)}([function(b,y,a){var t=a(1);typeof t=="string"&&(t=[[b.i,t,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(3)(t,o),t.locals&&(b.exports=t.locals)},function(b,y,a){(b.exports=a(2)(!1)).push([b.i,`.cdx-marker {
  background: rgba(245,235,111,0.29);
  padding: 3px 0;
}`,""])},function(b,y){b.exports=function(a){var t=[];return t.toString=function(){return this.map(function(o){var h=function(p,i){var u=p[1]||"",s=p[3];if(!s)return u;if(i&&typeof btoa=="function"){var g=(L=s,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(L))))+" */"),x=s.sources.map(function(T){return"/*# sourceURL="+s.sourceRoot+T+" */"});return[u].concat(x).concat([g]).join(`
`)}var L;return[u].join(`
`)}(o,a);return o[2]?"@media "+o[2]+"{"+h+"}":h}).join("")},t.i=function(o,h){typeof o=="string"&&(o=[[null,o,""]]);for(var p={},i=0;i<this.length;i++){var u=this[i][0];typeof u=="number"&&(p[u]=!0)}for(i=0;i<o.length;i++){var s=o[i];typeof s[0]=="number"&&p[s[0]]||(h&&!s[2]?s[2]=h:h&&(s[2]="("+s[2]+") and ("+h+")"),t.push(s))}},t}},function(b,y,a){var t,o,h={},p=(t=function(){return window&&document&&document.all&&!window.atob},function(){return o===void 0&&(o=t.apply(this,arguments)),o}),i=function(n){var e={};return function(r){if(typeof r=="function")return r();if(e[r]===void 0){var c=function(d){return document.querySelector(d)}.call(this,r);if(window.HTMLIFrameElement&&c instanceof window.HTMLIFrameElement)try{c=c.contentDocument.head}catch{c=null}e[r]=c}return e[r]}}(),u=null,s=0,g=[],x=a(4);function L(n,e){for(var r=0;r<n.length;r++){var c=n[r],d=h[c.id];if(d){d.refs++;for(var l=0;l<d.parts.length;l++)d.parts[l](c.parts[l]);for(;l<c.parts.length;l++)d.parts.push(I(c.parts[l],e))}else{var v=[];for(l=0;l<c.parts.length;l++)v.push(I(c.parts[l],e));h[c.id]={id:c.id,refs:1,parts:v}}}}function T(n,e){for(var r=[],c={},d=0;d<n.length;d++){var l=n[d],v=e.base?l[0]+e.base:l[0],f={css:l[1],media:l[2],sourceMap:l[3]};c[v]?c[v].parts.push(f):r.push(c[v]={id:v,parts:[f]})}return r}function R(n,e){var r=i(n.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var c=g[g.length-1];if(n.insertAt==="top")c?c.nextSibling?r.insertBefore(e,c.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),g.push(e);else if(n.insertAt==="bottom")r.appendChild(e);else{if(typeof n.insertAt!="object"||!n.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var d=i(n.insertInto+" "+n.insertAt.before);r.insertBefore(e,d)}}function U(n){if(n.parentNode===null)return!1;n.parentNode.removeChild(n);var e=g.indexOf(n);e>=0&&g.splice(e,1)}function A(n){var e=document.createElement("style");return n.attrs.type===void 0&&(n.attrs.type="text/css"),E(e,n.attrs),R(n,e),e}function E(n,e){Object.keys(e).forEach(function(r){n.setAttribute(r,e[r])})}function I(n,e){var r,c,d,l;if(e.transform&&n.css){if(!(l=e.transform(n.css)))return function(){};n.css=l}if(e.singleton){var v=s++;r=u||(u=A(e)),c=B.bind(null,r,v,!1),d=B.bind(null,r,v,!0)}else n.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(r=function(f){var m=document.createElement("link");return f.attrs.type===void 0&&(f.attrs.type="text/css"),f.attrs.rel="stylesheet",E(m,f.attrs),R(f,m),m}(e),c=function(f,m,j){var C=j.css,O=j.sourceMap,D=m.convertToAbsoluteUrls===void 0&&O;(m.convertToAbsoluteUrls||D)&&(C=x(C)),O&&(C+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(O))))+" */");var $=new Blob([C],{type:"text/css"}),N=f.href;f.href=URL.createObjectURL($),N&&URL.revokeObjectURL(N)}.bind(null,r,e),d=function(){U(r),r.href&&URL.revokeObjectURL(r.href)}):(r=A(e),c=function(f,m){var j=m.css,C=m.media;if(C&&f.setAttribute("media",C),f.styleSheet)f.styleSheet.cssText=j;else{for(;f.firstChild;)f.removeChild(f.firstChild);f.appendChild(document.createTextNode(j))}}.bind(null,r),d=function(){U(r)});return c(n),function(f){if(f){if(f.css===n.css&&f.media===n.media&&f.sourceMap===n.sourceMap)return;c(n=f)}else d()}}b.exports=function(n,e){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs=typeof e.attrs=="object"?e.attrs:{},e.singleton||typeof e.singleton=="boolean"||(e.singleton=p()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=T(n,e);return L(r,e),function(c){for(var d=[],l=0;l<r.length;l++){var v=r[l];(f=h[v.id]).refs--,d.push(f)}for(c&&L(T(c,e),e),l=0;l<d.length;l++){var f;if((f=d[l]).refs===0){for(var m=0;m<f.parts.length;m++)f.parts[m]();delete h[f.id]}}}};var M,_=(M=[],function(n,e){return M[n]=e,M.filter(Boolean).join(`
`)});function B(n,e,r,c){var d=r?"":c.css;if(n.styleSheet)n.styleSheet.cssText=_(e,d);else{var l=document.createTextNode(d),v=n.childNodes;v[e]&&n.removeChild(v[e]),v.length?n.insertBefore(l,v[e]):n.appendChild(l)}}},function(b,y){b.exports=function(a){var t=typeof window<"u"&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!a||typeof a!="string")return a;var o=t.protocol+"//"+t.host,h=o+t.pathname.replace(/\/[^\/]*$/,"/");return a.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(p,i){var u,s=i.trim().replace(/^"(.*)"$/,function(g,x){return x}).replace(/^'(.*)'$/,function(g,x){return x});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?p:(u=s.indexOf("//")===0?s:s.indexOf("/")===0?o+s:h+s.replace(/^\.\//,""),"url("+JSON.stringify(u)+")")})}},function(b,y,a){a.r(y),a(0);function t(p,i){for(var u=0;u<i.length;u++){var s=i[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(p,s.key,s)}}function o(p,i,u){return i&&t(p.prototype,i),u&&t(p,u),p}a.d(y,"default",function(){return h});var h=function(){function p(i){var u=i.api;(function(s,g){if(!(s instanceof g))throw new TypeError("Cannot call a class as a function")})(this,p),this.api=u,this.button=null,this.tag="MARK",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}return o(p,null,[{key:"CSS",get:function(){return"cdx-marker"}}]),o(p,[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}},{key:"surround",value:function(i){if(i){var u=this.api.selection.findParentTag(this.tag,p.CSS);u?this.unwrap(u):this.wrap(i)}}},{key:"wrap",value:function(i){var u=document.createElement(this.tag);u.classList.add(p.CSS),u.appendChild(i.extractContents()),i.insertNode(u),this.api.selection.expandToTag(u)}},{key:"unwrap",value:function(i){this.api.selection.expandToTag(i);var u=window.getSelection(),s=u.getRangeAt(0),g=s.extractContents();i.parentNode.removeChild(i),s.insertNode(g),u.removeAllRanges(),u.addRange(s)}},{key:"checkState",value:function(){var i=this.api.selection.findParentTag(this.tag,p.CSS);this.button.classList.toggle(this.iconClasses.active,!!i)}},{key:"toolboxIcon",get:function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M11.3536 9.31802L12.7678 7.90381C13.5488 7.12276 14.8151 7.12276 15.5962 7.90381C16.3772 8.68486 16.3772 9.95119 15.5962 10.7322L14.182 12.1464M11.3536 9.31802L7.96729 12.7043C7.40889 13.2627 7.02827 13.9739 6.8734 14.7482L6.69798 15.6253C6.55804 16.325 7.17496 16.942 7.87468 16.802L8.75176 16.6266C9.52612 16.4717 10.2373 16.0911 10.7957 15.5327L14.182 12.1464M11.3536 9.31802L14.182 12.1464"/><line x1="15" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>'}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{mark:{class:p.CSS}}}}]),p}()}]).default})})(k);var P=k.exports;return S(P)});
