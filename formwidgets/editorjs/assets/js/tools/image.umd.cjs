(function($,J){typeof exports=="object"&&typeof module<"u"?module.exports=J():typeof define=="function"&&define.amd?define(J):($=typeof globalThis<"u"?globalThis:$||self,$.ImageTool=J())})(this,function(){"use strict";function $(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var J={exports:{}};/*!
 * Image tool
 * 
 * @version 2.8.1
 * 
 * @package https://github.com/editor-js/image
 * @licence MIT
 * @author CodeX <https://codex.so>
 */(function(A,K){(function(L,P){A.exports=P()})(window,function(){return function(L){var P={};function h(f){if(P[f])return P[f].exports;var o=P[f]={i:f,l:!1,exports:{}};return L[f].call(o.exports,o,o.exports,h),o.l=!0,o.exports}return h.m=L,h.c=P,h.d=function(f,o,s){h.o(f,o)||Object.defineProperty(f,o,{enumerable:!0,get:s})},h.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},h.t=function(f,o){if(1&o&&(f=h(f)),8&o||4&o&&typeof f=="object"&&f&&f.__esModule)return f;var s=Object.create(null);if(h.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:f}),2&o&&typeof f!="string")for(var n in f)h.d(s,n,function(a){return f[a]}.bind(null,n));return s},h.n=function(f){var o=f&&f.__esModule?function(){return f.default}:function(){return f};return h.d(o,"a",o),o},h.o=function(f,o){return Object.prototype.hasOwnProperty.call(f,o)},h.p="/",h(h.s=9)}([function(L,P){function h(f,o){for(var s=0;s<o.length;s++){var n=o[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(f,n.key,n)}}L.exports=function(f,o,s){return o&&h(f.prototype,o),s&&h(f,s),f}},function(L,P,h){L.exports=function(f){var o={};function s(n){if(o[n])return o[n].exports;var a=o[n]={i:n,l:!1,exports:{}};return f[n].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=f,s.c=o,s.d=function(n,a,m){s.o(n,a)||Object.defineProperty(n,a,{enumerable:!0,get:m})},s.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},s.t=function(n,a){if(1&a&&(n=s(n)),8&a||4&a&&typeof n=="object"&&n&&n.__esModule)return n;var m=Object.create(null);if(s.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:n}),2&a&&typeof n!="string")for(var j in n)s.d(m,j,function(d){return n[d]}.bind(null,j));return m},s.n=function(n){var a=n&&n.__esModule?function(){return n.default}:function(){return n};return s.d(a,"a",a),a},s.o=function(n,a){return Object.prototype.hasOwnProperty.call(n,a)},s.p="",s(s.s=3)}([function(f,o){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}f.exports=s},function(f,o,s){(function(n){var a=s(2),m=setTimeout;function j(){}function d(t){if(!(this instanceof d))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],e(t,this)}function p(t,i){for(;t._state===3;)t=t._value;t._state!==0?(t._handled=!0,d._immediateFn(function(){var r=t._state===1?i.onFulfilled:i.onRejected;if(r!==null){var y;try{y=r(t._value)}catch(b){return void C(i.promise,b)}E(i.promise,y)}else(t._state===1?E:C)(i.promise,t._value)})):t._deferreds.push(i)}function E(t,i){try{if(i===t)throw new TypeError("A promise cannot be resolved with itself.");if(i&&(typeof i=="object"||typeof i=="function")){var r=i.then;if(i instanceof d)return t._state=3,t._value=i,void k(t);if(typeof r=="function")return void e((y=r,b=i,function(){y.apply(b,arguments)}),t)}t._state=1,t._value=i,k(t)}catch(v){C(t,v)}var y,b}function C(t,i){t._state=2,t._value=i,k(t)}function k(t){t._state===2&&t._deferreds.length===0&&d._immediateFn(function(){t._handled||d._unhandledRejectionFn(t._value)});for(var i=0,r=t._deferreds.length;i<r;i++)p(t,t._deferreds[i]);t._deferreds=null}function F(t,i,r){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof i=="function"?i:null,this.promise=r}function e(t,i){var r=!1;try{t(function(y){r||(r=!0,E(i,y))},function(y){r||(r=!0,C(i,y))})}catch(y){if(r)return;r=!0,C(i,y)}}d.prototype.catch=function(t){return this.then(null,t)},d.prototype.then=function(t,i){var r=new this.constructor(j);return p(this,new F(t,i,r)),r},d.prototype.finally=a.a,d.all=function(t){return new d(function(i,r){if(!t||t.length===void 0)throw new TypeError("Promise.all accepts an array");var y=Array.prototype.slice.call(t);if(y.length===0)return i([]);var b=y.length;function v(_,u){try{if(u&&(typeof u=="object"||typeof u=="function")){var w=u.then;if(typeof w=="function")return void w.call(u,function(S){v(_,S)},r)}y[_]=u,--b==0&&i(y)}catch(S){r(S)}}for(var g=0;g<y.length;g++)v(g,y[g])})},d.resolve=function(t){return t&&typeof t=="object"&&t.constructor===d?t:new d(function(i){i(t)})},d.reject=function(t){return new d(function(i,r){r(t)})},d.race=function(t){return new d(function(i,r){for(var y=0,b=t.length;y<b;y++)t[y].then(i,r)})},d._immediateFn=typeof n=="function"&&function(t){n(t)}||function(t){m(t,0)},d._unhandledRejectionFn=function(t){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},o.a=d}).call(this,s(5).setImmediate)},function(f,o,s){o.a=function(n){var a=this.constructor;return this.then(function(m){return a.resolve(n()).then(function(){return m})},function(m){return a.resolve(n()).then(function(){return a.reject(m)})})}},function(f,o,s){function n(e){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}s(4);var a,m,j,d,p,E,C,k=s(8),F=(m=function(e){return new Promise(function(t,i){e=d(e),(e=p(e)).beforeSend&&e.beforeSend();var r=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");r.open(e.method,e.url),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(e.headers).forEach(function(b){var v=e.headers[b];r.setRequestHeader(b,v)});var y=e.ratio;r.upload.addEventListener("progress",function(b){var v=Math.round(b.loaded/b.total*100),g=Math.ceil(v*y/100);e.progress(Math.min(g,100))},!1),r.addEventListener("progress",function(b){var v=Math.round(b.loaded/b.total*100),g=Math.ceil(v*(100-y)/100)+y;e.progress(Math.min(g,100))},!1),r.onreadystatechange=function(){if(r.readyState===4){var b=r.response;try{b=JSON.parse(b)}catch{}var v=k.parseHeaders(r.getAllResponseHeaders()),g={body:b,code:r.status,headers:v};C(r.status)?t(g):i(g)}},r.send(e.data)})},j=function(e){return e.method="POST",m(e)},d=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e.url&&typeof e.url!="string")throw new Error("Url must be a string");if(e.url=e.url||"",e.method&&typeof e.method!="string")throw new Error("`method` must be a string or null");if(e.method=e.method?e.method.toUpperCase():"GET",e.headers&&n(e.headers)!=="object")throw new Error("`headers` must be an object or null");if(e.headers=e.headers||{},e.type&&(typeof e.type!="string"||!Object.values(a).includes(e.type)))throw new Error("`type` must be taken from module's «contentType» library");if(e.progress&&typeof e.progress!="function")throw new Error("`progress` must be a function or null");if(e.progress=e.progress||function(t){},e.beforeSend=e.beforeSend||function(t){},e.ratio&&typeof e.ratio!="number")throw new Error("`ratio` must be a number");if(e.ratio<0||e.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(e.ratio=e.ratio||90,e.accept&&typeof e.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(e.accept=e.accept||"*/*",e.multiple&&typeof e.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(e.multiple=e.multiple||!1,e.fieldName&&typeof e.fieldName!="string")throw new Error("`fieldName` must be a string");return e.fieldName=e.fieldName||"files",e},p=function(e){switch(e.method){case"GET":var t=E(e.data,a.URLENCODED);delete e.data,e.url=/\?/.test(e.url)?e.url+"&"+t:e.url+"?"+t;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var i=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||a.JSON}(e);(k.isFormData(e.data)||k.isFormElement(e.data))&&(i=a.FORM),e.data=E(e.data,i),i!==F.contentType.FORM&&(e.headers["content-type"]=i)}return e},E=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case a.URLENCODED:return k.urlEncode(e);case a.JSON:return k.jsonEncode(e);case a.FORM:return k.formEncode(e);default:return e}},C=function(e){return e>=200&&e<300},{contentType:a={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:m,get:function(e){return e.method="GET",m(e)},post:j,transport:function(e){return e=d(e),k.selectFiles(e).then(function(t){for(var i=new FormData,r=0;r<t.length;r++)i.append(e.fieldName,t[r],t[r].name);k.isObject(e.data)&&Object.keys(e.data).forEach(function(b){var v=e.data[b];i.append(b,v)});var y=e.beforeSend;return e.beforeSend=function(){return y(t)},e.data=i,j(e)})},selectFiles:function(e){return delete(e=d(e)).beforeSend,k.selectFiles(e)}});f.exports=F},function(f,o,s){s.r(o);var n=s(1);window.Promise=window.Promise||n.a},function(f,o,s){(function(n){var a=n!==void 0&&n||typeof self<"u"&&self||window,m=Function.prototype.apply;function j(d,p){this._id=d,this._clearFn=p}o.setTimeout=function(){return new j(m.call(setTimeout,a,arguments),clearTimeout)},o.setInterval=function(){return new j(m.call(setInterval,a,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(d){d&&d.close()},j.prototype.unref=j.prototype.ref=function(){},j.prototype.close=function(){this._clearFn.call(a,this._id)},o.enroll=function(d,p){clearTimeout(d._idleTimeoutId),d._idleTimeout=p},o.unenroll=function(d){clearTimeout(d._idleTimeoutId),d._idleTimeout=-1},o._unrefActive=o.active=function(d){clearTimeout(d._idleTimeoutId);var p=d._idleTimeout;p>=0&&(d._idleTimeoutId=setTimeout(function(){d._onTimeout&&d._onTimeout()},p))},s(6),o.setImmediate=typeof self<"u"&&self.setImmediate||n!==void 0&&n.setImmediate||this&&this.setImmediate,o.clearImmediate=typeof self<"u"&&self.clearImmediate||n!==void 0&&n.clearImmediate||this&&this.clearImmediate}).call(this,s(0))},function(f,o,s){(function(n,a){(function(m,j){if(!m.setImmediate){var d,p,E,C,k,F=1,e={},t=!1,i=m.document,r=Object.getPrototypeOf&&Object.getPrototypeOf(m);r=r&&r.setTimeout?r:m,{}.toString.call(m.process)==="[object process]"?d=function(v){a.nextTick(function(){b(v)})}:function(){if(m.postMessage&&!m.importScripts){var v=!0,g=m.onmessage;return m.onmessage=function(){v=!1},m.postMessage("","*"),m.onmessage=g,v}}()?(C="setImmediate$"+Math.random()+"$",k=function(v){v.source===m&&typeof v.data=="string"&&v.data.indexOf(C)===0&&b(+v.data.slice(C.length))},m.addEventListener?m.addEventListener("message",k,!1):m.attachEvent("onmessage",k),d=function(v){m.postMessage(C+v,"*")}):m.MessageChannel?((E=new MessageChannel).port1.onmessage=function(v){b(v.data)},d=function(v){E.port2.postMessage(v)}):i&&"onreadystatechange"in i.createElement("script")?(p=i.documentElement,d=function(v){var g=i.createElement("script");g.onreadystatechange=function(){b(v),g.onreadystatechange=null,p.removeChild(g),g=null},p.appendChild(g)}):d=function(v){setTimeout(b,0,v)},r.setImmediate=function(v){typeof v!="function"&&(v=new Function(""+v));for(var g=new Array(arguments.length-1),_=0;_<g.length;_++)g[_]=arguments[_+1];var u={callback:v,args:g};return e[F]=u,d(F),F++},r.clearImmediate=y}function y(v){delete e[v]}function b(v){if(t)setTimeout(b,0,v);else{var g=e[v];if(g){t=!0;try{(function(_){var u=_.callback,w=_.args;switch(w.length){case 0:u();break;case 1:u(w[0]);break;case 2:u(w[0],w[1]);break;case 3:u(w[0],w[1],w[2]);break;default:u.apply(void 0,w)}})(g)}finally{y(v),t=!1}}}}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,s(0),s(7))},function(f,o){var s,n,a=f.exports={};function m(){throw new Error("setTimeout has not been defined")}function j(){throw new Error("clearTimeout has not been defined")}function d(r){if(s===setTimeout)return setTimeout(r,0);if((s===m||!s)&&setTimeout)return s=setTimeout,setTimeout(r,0);try{return s(r,0)}catch{try{return s.call(null,r,0)}catch{return s.call(this,r,0)}}}(function(){try{s=typeof setTimeout=="function"?setTimeout:m}catch{s=m}try{n=typeof clearTimeout=="function"?clearTimeout:j}catch{n=j}})();var p,E=[],C=!1,k=-1;function F(){C&&p&&(C=!1,p.length?E=p.concat(E):k=-1,E.length&&e())}function e(){if(!C){var r=d(F);C=!0;for(var y=E.length;y;){for(p=E,E=[];++k<y;)p&&p[k].run();k=-1,y=E.length}p=null,C=!1,function(b){if(n===clearTimeout)return clearTimeout(b);if((n===j||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(b);try{n(b)}catch{try{return n.call(null,b)}catch{return n.call(this,b)}}}(r)}}function t(r,y){this.fun=r,this.array=y}function i(){}a.nextTick=function(r){var y=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)y[b-1]=arguments[b];E.push(new t(r,y)),E.length!==1||C||d(e)},t.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=i,a.addListener=i,a.once=i,a.off=i,a.removeListener=i,a.removeAllListeners=i,a.emit=i,a.prependListener=i,a.prependOnceListener=i,a.listeners=function(r){return[]},a.binding=function(r){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(r){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(f,o,s){function n(m,j){for(var d=0;d<j.length;d++){var p=j[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(m,p.key,p)}}var a=s(9);f.exports=function(){function m(){(function(p,E){if(!(p instanceof E))throw new TypeError("Cannot call a class as a function")})(this,m)}var j,d;return j=m,(d=[{key:"urlEncode",value:function(p){return a(p)}},{key:"jsonEncode",value:function(p){return JSON.stringify(p)}},{key:"formEncode",value:function(p){if(this.isFormData(p))return p;if(this.isFormElement(p))return new FormData(p);if(this.isObject(p)){var E=new FormData;return Object.keys(p).forEach(function(C){var k=p[C];E.append(C,k)}),E}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(p){return Object.prototype.toString.call(p)==="[object Object]"}},{key:"isFormData",value:function(p){return p instanceof FormData}},{key:"isFormElement",value:function(p){return p instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(E,C){var k=document.createElement("INPUT");k.type="file",p.multiple&&k.setAttribute("multiple","multiple"),p.accept&&k.setAttribute("accept",p.accept),k.style.display="none",document.body.appendChild(k),k.addEventListener("change",function(F){var e=F.target.files;E(e),document.body.removeChild(k)},!1),k.click()})}},{key:"parseHeaders",value:function(p){var E=p.trim().split(/[\r\n]+/),C={};return E.forEach(function(k){var F=k.split(": "),e=F.shift(),t=F.join(": ");e&&(C[e]=t)}),C}}])&&n(j,d),m}()},function(f,o){var s=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},n=function(a,m,j,d){return m=m||null,j=j||"&",d=d||null,a?function(p){for(var E=new Array,C=0;C<p.length;C++)p[C]&&E.push(p[C]);return E}(Object.keys(a).map(function(p){var E,C,k=p;if(d&&(k=d+"["+k+"]"),typeof a[p]=="object"&&a[p]!==null)E=n(a[p],null,j,k);else{m&&(C=k,k=!isNaN(parseFloat(C))&&isFinite(C)?m+Number(k):k);var F=a[p];F=(F=(F=(F=F===!0?"1":F)===!1?"0":F)===0?"0":F)||"",E=s(k)+"="+s(F)}return E})).join(j).replace(/[!'()*]/g,""):""};f.exports=n}])},function(L,P){L.exports=function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}},function(L,P,h){L.exports=h(10)},function(L,P){L.exports=function(h,f){(f==null||f>h.length)&&(f=h.length);for(var o=0,s=new Array(f);o<f;o++)s[o]=h[o];return s}},function(L,P,h){var f=h(4);L.exports=function(o,s){if(o){if(typeof o=="string")return f(o,s);var n=Object.prototype.toString.call(o).slice(8,-1);return n==="Object"&&o.constructor&&(n=o.constructor.name),n==="Map"||n==="Set"?Array.from(n):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(o,s):void 0}}},function(L,P){function h(f,o,s,n,a,m,j){try{var d=f[m](j),p=d.value}catch(E){return void s(E)}d.done?o(p):Promise.resolve(p).then(n,a)}L.exports=function(f){return function(){var o=this,s=arguments;return new Promise(function(n,a){var m=f.apply(o,s);function j(p){h(m,n,a,j,d,"next",p)}function d(p){h(m,n,a,j,d,"throw",p)}j(void 0)})}}},function(L,P,h){var f=h(15),o=h(16),s=h(5),n=h(17);L.exports=function(a){return f(a)||o(a)||s(a)||n()}},function(L,P,h){var f=h(18),o=h(19),s=h(5),n=h(20);L.exports=function(a,m){return f(a)||o(a,m)||s(a,m)||n()}},function(L,P,h){L.exports=h(21)},function(L,P,h){var f=function(o){var s=Object.prototype,n=s.hasOwnProperty,a=typeof Symbol=="function"?Symbol:{},m=a.iterator||"@@iterator",j=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function p(c,l,x,T){var O=l&&l.prototype instanceof k?l:k,R=Object.create(O.prototype),H=new w(T||[]);return R._invoke=function(X,D,I){var U="suspendedStart";return function(B,q){if(U==="executing")throw new Error("Generator is already running");if(U==="completed"){if(B==="throw")throw q;return M()}for(I.method=B,I.arg=q;;){var Y=I.delegate;if(Y){var G=g(Y,I);if(G){if(G===C)continue;return G}}if(I.method==="next")I.sent=I._sent=I.arg;else if(I.method==="throw"){if(U==="suspendedStart")throw U="completed",I.arg;I.dispatchException(I.arg)}else I.method==="return"&&I.abrupt("return",I.arg);U="executing";var N=E(X,D,I);if(N.type==="normal"){if(U=I.done?"completed":"suspendedYield",N.arg===C)continue;return{value:N.arg,done:I.done}}N.type==="throw"&&(U="completed",I.method="throw",I.arg=N.arg)}}}(c,x,H),R}function E(c,l,x){try{return{type:"normal",arg:c.call(l,x)}}catch(T){return{type:"throw",arg:T}}}o.wrap=p;var C={};function k(){}function F(){}function e(){}var t={};t[m]=function(){return this};var i=Object.getPrototypeOf,r=i&&i(i(S([])));r&&r!==s&&n.call(r,m)&&(t=r);var y=e.prototype=k.prototype=Object.create(t);function b(c){["next","throw","return"].forEach(function(l){c[l]=function(x){return this._invoke(l,x)}})}function v(c,l){var x;this._invoke=function(T,O){function R(){return new l(function(H,X){(function D(I,U,B,q){var Y=E(c[I],c,U);if(Y.type!=="throw"){var G=Y.arg,N=G.value;return N&&typeof N=="object"&&n.call(N,"__await")?l.resolve(N.__await).then(function(V){D("next",V,B,q)},function(V){D("throw",V,B,q)}):l.resolve(N).then(function(V){G.value=V,B(G)},function(V){return D("throw",V,B,q)})}q(Y.arg)})(T,O,H,X)})}return x=x?x.then(R,R):R()}}function g(c,l){var x=c.iterator[l.method];if(x===void 0){if(l.delegate=null,l.method==="throw"){if(c.iterator.return&&(l.method="return",l.arg=void 0,g(c,l),l.method==="throw"))return C;l.method="throw",l.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var T=E(x,c.iterator,l.arg);if(T.type==="throw")return l.method="throw",l.arg=T.arg,l.delegate=null,C;var O=T.arg;return O?O.done?(l[c.resultName]=O.value,l.next=c.nextLoc,l.method!=="return"&&(l.method="next",l.arg=void 0),l.delegate=null,C):O:(l.method="throw",l.arg=new TypeError("iterator result is not an object"),l.delegate=null,C)}function _(c){var l={tryLoc:c[0]};1 in c&&(l.catchLoc=c[1]),2 in c&&(l.finallyLoc=c[2],l.afterLoc=c[3]),this.tryEntries.push(l)}function u(c){var l=c.completion||{};l.type="normal",delete l.arg,c.completion=l}function w(c){this.tryEntries=[{tryLoc:"root"}],c.forEach(_,this),this.reset(!0)}function S(c){if(c){var l=c[m];if(l)return l.call(c);if(typeof c.next=="function")return c;if(!isNaN(c.length)){var x=-1,T=function O(){for(;++x<c.length;)if(n.call(c,x))return O.value=c[x],O.done=!1,O;return O.value=void 0,O.done=!0,O};return T.next=T}}return{next:M}}function M(){return{value:void 0,done:!0}}return F.prototype=y.constructor=e,e.constructor=F,e[d]=F.displayName="GeneratorFunction",o.isGeneratorFunction=function(c){var l=typeof c=="function"&&c.constructor;return!!l&&(l===F||(l.displayName||l.name)==="GeneratorFunction")},o.mark=function(c){return Object.setPrototypeOf?Object.setPrototypeOf(c,e):(c.__proto__=e,d in c||(c[d]="GeneratorFunction")),c.prototype=Object.create(y),c},o.awrap=function(c){return{__await:c}},b(v.prototype),v.prototype[j]=function(){return this},o.AsyncIterator=v,o.async=function(c,l,x,T,O){O===void 0&&(O=Promise);var R=new v(p(c,l,x,T),O);return o.isGeneratorFunction(l)?R:R.next().then(function(H){return H.done?H.value:R.next()})},b(y),y[d]="Generator",y[m]=function(){return this},y.toString=function(){return"[object Generator]"},o.keys=function(c){var l=[];for(var x in c)l.push(x);return l.reverse(),function T(){for(;l.length;){var O=l.pop();if(O in c)return T.value=O,T.done=!1,T}return T.done=!0,T}},o.values=S,w.prototype={constructor:w,reset:function(c){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(u),!c)for(var l in this)l.charAt(0)==="t"&&n.call(this,l)&&!isNaN(+l.slice(1))&&(this[l]=void 0)},stop:function(){this.done=!0;var c=this.tryEntries[0].completion;if(c.type==="throw")throw c.arg;return this.rval},dispatchException:function(c){if(this.done)throw c;var l=this;function x(D,I){return R.type="throw",R.arg=c,l.next=D,I&&(l.method="next",l.arg=void 0),!!I}for(var T=this.tryEntries.length-1;T>=0;--T){var O=this.tryEntries[T],R=O.completion;if(O.tryLoc==="root")return x("end");if(O.tryLoc<=this.prev){var H=n.call(O,"catchLoc"),X=n.call(O,"finallyLoc");if(H&&X){if(this.prev<O.catchLoc)return x(O.catchLoc,!0);if(this.prev<O.finallyLoc)return x(O.finallyLoc)}else if(H){if(this.prev<O.catchLoc)return x(O.catchLoc,!0)}else{if(!X)throw new Error("try statement without catch or finally");if(this.prev<O.finallyLoc)return x(O.finallyLoc)}}}},abrupt:function(c,l){for(var x=this.tryEntries.length-1;x>=0;--x){var T=this.tryEntries[x];if(T.tryLoc<=this.prev&&n.call(T,"finallyLoc")&&this.prev<T.finallyLoc){var O=T;break}}O&&(c==="break"||c==="continue")&&O.tryLoc<=l&&l<=O.finallyLoc&&(O=null);var R=O?O.completion:{};return R.type=c,R.arg=l,O?(this.method="next",this.next=O.finallyLoc,C):this.complete(R)},complete:function(c,l){if(c.type==="throw")throw c.arg;return c.type==="break"||c.type==="continue"?this.next=c.arg:c.type==="return"?(this.rval=this.arg=c.arg,this.method="return",this.next="end"):c.type==="normal"&&l&&(this.next=l),C},finish:function(c){for(var l=this.tryEntries.length-1;l>=0;--l){var x=this.tryEntries[l];if(x.finallyLoc===c)return this.complete(x.completion,x.afterLoc),u(x),C}},catch:function(c){for(var l=this.tryEntries.length-1;l>=0;--l){var x=this.tryEntries[l];if(x.tryLoc===c){var T=x.completion;if(T.type==="throw"){var O=T.arg;u(x)}return O}}throw new Error("illegal catch attempt")},delegateYield:function(c,l,x){return this.delegate={iterator:S(c),resultName:l,nextLoc:x},this.method==="next"&&(this.arg=void 0),C}},o}(L.exports);try{regeneratorRuntime=f}catch{Function("r","regeneratorRuntime = r")(f)}},function(L,P,h){var f=h(12),o=h(13);typeof(o=o.__esModule?o.default:o)=="string"&&(o=[[L.i,o,""]]);var s={insert:"head",singleton:!1},n=(f(o,s),o.locals?o.locals:{});L.exports=n},function(L,P,h){var f,o=function(){return f===void 0&&(f=!!(window&&document&&document.all&&!window.atob)),f},s=function(){var t={};return function(i){if(t[i]===void 0){var r=document.querySelector(i);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}t[i]=r}return t[i]}}(),n=[];function a(t){for(var i=-1,r=0;r<n.length;r++)if(n[r].identifier===t){i=r;break}return i}function m(t,i){for(var r={},y=[],b=0;b<t.length;b++){var v=t[b],g=i.base?v[0]+i.base:v[0],_=r[g]||0,u="".concat(g," ").concat(_);r[g]=_+1;var w=a(u),S={css:v[1],media:v[2],sourceMap:v[3]};w!==-1?(n[w].references++,n[w].updater(S)):n.push({identifier:u,updater:e(S,i),references:1}),y.push(u)}return y}function j(t){var i=document.createElement("style"),r=t.attributes||{};if(r.nonce===void 0){var y=h.nc;y&&(r.nonce=y)}if(Object.keys(r).forEach(function(v){i.setAttribute(v,r[v])}),typeof t.insert=="function")t.insert(i);else{var b=s(t.insert||"head");if(!b)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");b.appendChild(i)}return i}var d,p=(d=[],function(t,i){return d[t]=i,d.filter(Boolean).join(`
`)});function E(t,i,r,y){var b=r?"":y.media?"@media ".concat(y.media," {").concat(y.css,"}"):y.css;if(t.styleSheet)t.styleSheet.cssText=p(i,b);else{var v=document.createTextNode(b),g=t.childNodes;g[i]&&t.removeChild(g[i]),g.length?t.insertBefore(v,g[i]):t.appendChild(v)}}function C(t,i,r){var y=r.css,b=r.media,v=r.sourceMap;if(b?t.setAttribute("media",b):t.removeAttribute("media"),v&&btoa&&(y+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(v))))," */")),t.styleSheet)t.styleSheet.cssText=y;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(y))}}var k=null,F=0;function e(t,i){var r,y,b;if(i.singleton){var v=F++;r=k||(k=j(i)),y=E.bind(null,r,v,!1),b=E.bind(null,r,v,!0)}else r=j(i),y=C.bind(null,r,i),b=function(){(function(g){if(g.parentNode===null)return!1;g.parentNode.removeChild(g)})(r)};return y(t),function(g){if(g){if(g.css===t.css&&g.media===t.media&&g.sourceMap===t.sourceMap)return;y(t=g)}else b()}}L.exports=function(t,i){(i=i||{}).singleton||typeof i.singleton=="boolean"||(i.singleton=o());var r=m(t=t||[],i);return function(y){if(y=y||[],Object.prototype.toString.call(y)==="[object Array]"){for(var b=0;b<r.length;b++){var v=a(r[b]);n[v].references--}for(var g=m(y,i),_=0;_<r.length;_++){var u=a(r[_]);n[u].references===0&&(n[u].updater(),n.splice(u,1))}r=g}}}},function(L,P,h){(P=h(14)(!1)).push([L.i,`.image-tool {
  --bg-color: #cdd1e0;
  --front-color: #388ae5;
  --border-color: #e8e8eb;

}

  .image-tool__image {
    border-radius: 3px;
    overflow: hidden;
    margin-bottom: 10px;
  }

  .image-tool__image-picture {
      max-width: 100%;
      vertical-align: bottom;
      display: block;
    }

  .image-tool__image-preloader {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-size: cover;
      margin: auto;
      position: relative;
      background-color: var(--bg-color);
      background-position: center center;
    }

  .image-tool__image-preloader::after {
        content: "";
        position: absolute;
        z-index: 3;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        border: 2px solid var(--bg-color);
        border-top-color: var(--front-color);
        left: 50%;
        top: 50%;
        margin-top: -30px;
        margin-left: -30px;
        animation: image-preloader-spin 2s infinite linear;
        box-sizing: border-box;
      }

  .image-tool__caption[contentEditable="true"][data-placeholder]::before {
      position: absolute !important;
      content: attr(data-placeholder);
      color: #707684;
      font-weight: normal;
      display: none;
    }

  .image-tool__caption[contentEditable="true"][data-placeholder]:empty::before {
        display: block;
      }

  .image-tool__caption[contentEditable="true"][data-placeholder]:empty:focus::before {
        display: none;
      }

  .image-tool--empty .image-tool__image {
      display: none;
    }

  .image-tool--empty .image-tool__caption, .image-tool--loading .image-tool__caption {
      display: none;
    }

  .image-tool .cdx-button {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .image-tool .cdx-button svg {
      height: auto;
      margin: 0 6px 0 0;
    }

  .image-tool--filled .cdx-button {
      display: none;
    }

  .image-tool--filled .image-tool__image-preloader {
        display: none;
      }

  .image-tool--loading .image-tool__image {
      min-height: 200px;
      display: flex;
      border: 1px solid var(--border-color);
      background-color: #fff;
    }

  .image-tool--loading .image-tool__image-picture {
        display: none;
      }

  .image-tool--loading .cdx-button {
      display: none;
    }

  /**
   * Tunes
   * ----------------
   */

  .image-tool--withBorder .image-tool__image {
      border: 1px solid var(--border-color);
    }

  .image-tool--withBackground .image-tool__image {
      padding: 15px;
      background: var(--bg-color);
    }

  .image-tool--withBackground .image-tool__image-picture {
        max-width: 60%;
        margin: 0 auto;
      }

  .image-tool--stretched .image-tool__image-picture {
        width: 100%;
      }

@keyframes image-preloader-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
`,""]),L.exports=P},function(L,P,h){L.exports=function(f){var o=[];return o.toString=function(){return this.map(function(s){var n=function(a,m){var j=a[1]||"",d=a[3];if(!d)return j;if(m&&typeof btoa=="function"){var p=(C=d,k=btoa(unescape(encodeURIComponent(JSON.stringify(C)))),F="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(k),"/*# ".concat(F," */")),E=d.sources.map(function(e){return"/*# sourceURL=".concat(d.sourceRoot||"").concat(e," */")});return[j].concat(E).concat([p]).join(`
`)}var C,k,F;return[j].join(`
`)}(s,f);return s[2]?"@media ".concat(s[2]," {").concat(n,"}"):n}).join("")},o.i=function(s,n,a){typeof s=="string"&&(s=[[null,s,""]]);var m={};if(a)for(var j=0;j<this.length;j++){var d=this[j][0];d!=null&&(m[d]=!0)}for(var p=0;p<s.length;p++){var E=[].concat(s[p]);a&&m[E[0]]||(n&&(E[2]?E[2]="".concat(n," and ").concat(E[2]):E[2]=n),o.push(E))}},o}},function(L,P,h){var f=h(4);L.exports=function(o){if(Array.isArray(o))return f(o)}},function(L,P){L.exports=function(h){if(typeof Symbol<"u"&&Symbol.iterator in Object(h))return Array.from(h)}},function(L,P){L.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(L,P){L.exports=function(h){if(Array.isArray(h))return h}},function(L,P){L.exports=function(h,f){if(typeof Symbol<"u"&&Symbol.iterator in Object(h)){var o=[],s=!0,n=!1,a=void 0;try{for(var m,j=h[Symbol.iterator]();!(s=(m=j.next()).done)&&(o.push(m.value),!f||o.length!==f);s=!0);}catch(d){n=!0,a=d}finally{try{s||j.return==null||j.return()}finally{if(n)throw a}}return o}}},function(L,P){L.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(L,P,h){h.r(P),h.d(P,"default",function(){return v});var f=h(3),o=h.n(f),s=h(6),n=h.n(s),a=h(2),m=h.n(a),j=h(0),d=h.n(j);h(11);const p='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.13968 15.32L8.69058 11.5661C9.02934 11.2036 9.48873 11 9.96774 11C10.4467 11 10.9061 11.2036 11.2449 11.5661L15.3871 16M13.5806 14.0664L15.0132 12.533C15.3519 12.1705 15.8113 11.9668 16.2903 11.9668C16.7693 11.9668 17.2287 12.1705 17.5675 12.533L18.841 13.9634"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.7778 9.33331H13.7867"/></svg>';var E=h(7),C=h.n(E);function k(g){var _,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},S=document.createElement(g);Array.isArray(u)?(_=S.classList).add.apply(_,C()(u)):u&&S.classList.add(u);for(var M in w)S[M]=w[M];return S}var F=function(){function g(_){var u=_.api,w=_.config,S=_.onSelectFile,M=_.readOnly;m()(this,g),this.api=u,this.config=w,this.onSelectFile=S,this.readOnly=M,this.nodes={wrapper:k("div",[this.CSS.baseClass,this.CSS.wrapper]),imageContainer:k("div",[this.CSS.imageContainer]),fileButton:this.createFileButton(),imageEl:void 0,imagePreloader:k("div",this.CSS.imagePreloader),caption:k("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly})},this.nodes.caption.dataset.placeholder=this.config.captionPlaceholder,this.nodes.imageContainer.appendChild(this.nodes.imagePreloader),this.nodes.wrapper.appendChild(this.nodes.imageContainer),this.nodes.wrapper.appendChild(this.nodes.caption),this.nodes.wrapper.appendChild(this.nodes.fileButton)}return d()(g,[{key:"render",value:function(_){return _.file&&Object.keys(_.file).length!==0?this.toggleStatus(g.status.UPLOADING):this.toggleStatus(g.status.EMPTY),this.nodes.wrapper}},{key:"createFileButton",value:function(){var _=this,u=k("div",[this.CSS.button]);return u.innerHTML=this.config.buttonContent||"".concat(p," ").concat(this.api.i18n.t("Select an Image")),u.addEventListener("click",function(){_.onSelectFile()}),u}},{key:"showPreloader",value:function(_){this.nodes.imagePreloader.style.backgroundImage="url(".concat(_,")"),this.toggleStatus(g.status.UPLOADING)}},{key:"hidePreloader",value:function(){this.nodes.imagePreloader.style.backgroundImage="",this.toggleStatus(g.status.EMPTY)}},{key:"fillImage",value:function(_){var u=this,w=/\.mp4$/.test(_)?"VIDEO":"IMG",S={src:_},M="load";w==="VIDEO"&&(S.autoplay=!0,S.loop=!0,S.muted=!0,S.playsinline=!0,M="loadeddata"),this.nodes.imageEl=k(w,this.CSS.imageEl,S),this.nodes.imageEl.addEventListener(M,function(){u.toggleStatus(g.status.FILLED),u.nodes.imagePreloader&&(u.nodes.imagePreloader.style.backgroundImage="")}),this.nodes.imageContainer.appendChild(this.nodes.imageEl)}},{key:"fillCaption",value:function(_){this.nodes.caption&&(this.nodes.caption.innerHTML=_)}},{key:"toggleStatus",value:function(_){for(var u in g.status)Object.prototype.hasOwnProperty.call(g.status,u)&&this.nodes.wrapper.classList.toggle("".concat(this.CSS.wrapper,"--").concat(g.status[u]),_===g.status[u])}},{key:"applyTune",value:function(_,u){this.nodes.wrapper.classList.toggle("".concat(this.CSS.wrapper,"--").concat(_),u)}},{key:"CSS",get:function(){return{baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,button:this.api.styles.button,wrapper:"image-tool",imageContainer:"image-tool__image",imagePreloader:"image-tool__image-preloader",imageEl:"image-tool__image-picture",caption:"image-tool__caption"}}}],[{key:"status",get:function(){return{EMPTY:"empty",UPLOADING:"loading",FILLED:"filled"}}}]),g}(),e=h(8),t=h.n(e),i=h(1),r=h.n(i);function y(g){return g&&typeof g.then=="function"}var b=function(){function g(_){var u=_.config,w=_.onUpload,S=_.onError;m()(this,g),this.config=u,this.onUpload=w,this.onError=S}return d()(g,[{key:"uploadSelectedFile",value:function(_){var u=this,w=_.onPreview,S=function(M){var c=new FileReader;c.readAsDataURL(M),c.onload=function(l){w(l.target.result)}};(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function"?r.a.selectFiles({accept:this.config.types}).then(function(M){S(M[0]);var c=u.config.uploader.uploadByFile(M[0]);return y(c)||console.warn("Custom uploader method uploadByFile should return a Promise"),c}):r.a.transport({url:this.config.endpoints.byFile,data:this.config.additionalRequestData,accept:this.config.types,headers:this.config.additionalRequestHeaders,beforeSend:function(M){S(M[0])},fieldName:this.config.field}).then(function(M){return M.body})).then(function(M){u.onUpload(M)}).catch(function(M){u.onError(M)})}},{key:"uploadByUrl",value:function(_){var u,w=this;this.config.uploader&&typeof this.config.uploader.uploadByUrl=="function"?y(u=this.config.uploader.uploadByUrl(_))||console.warn("Custom uploader method uploadByUrl should return a Promise"):u=r.a.post({url:this.config.endpoints.byUrl,data:Object.assign({url:_},this.config.additionalRequestData),type:r.a.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(function(S){return S.body}),u.then(function(S){w.onUpload(S)}).catch(function(S){w.onError(S)})}},{key:"uploadByFile",value:function(_,u){var w,S=this,M=u.onPreview,c=new FileReader;if(c.readAsDataURL(_),c.onload=function(x){M(x.target.result)},this.config.uploader&&typeof this.config.uploader.uploadByFile=="function")y(w=this.config.uploader.uploadByFile(_))||console.warn("Custom uploader method uploadByFile should return a Promise");else{var l=new FormData;l.append(this.config.field,_),this.config.additionalRequestData&&Object.keys(this.config.additionalRequestData).length&&Object.entries(this.config.additionalRequestData).forEach(function(x){var T=t()(x,2),O=T[0],R=T[1];l.append(O,R)}),w=r.a.post({url:this.config.endpoints.byFile,data:l,type:r.a.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(function(x){return x.body})}w.then(function(x){S.onUpload(x)}).catch(function(x){S.onError(x)})}}]),g}(),v=function(){function g(u){var w=this,S=u.data,M=u.config,c=u.api,l=u.readOnly;m()(this,g),this.api=c,this.readOnly=l,this.config={endpoints:M.endpoints||"",additionalRequestData:M.additionalRequestData||{},additionalRequestHeaders:M.additionalRequestHeaders||{},field:M.field||"image",types:M.types||"image/*",captionPlaceholder:this.api.i18n.t(M.captionPlaceholder||"Caption"),buttonContent:M.buttonContent||"",uploader:M.uploader||void 0,actions:M.actions||[]},this.uploader=new b({config:this.config,onUpload:function(x){return w.onUpload(x)},onError:function(x){return w.uploadingFailed(x)}}),this.ui=new F({api:c,config:this.config,onSelectFile:function(){w.uploader.uploadSelectedFile({onPreview:function(x){w.ui.showPreloader(x)}})},readOnly:l}),this._data={},this.data=S}var _;return d()(g,null,[{key:"isReadOnlySupported",get:function(){return!0}},{key:"toolbox",get:function(){return{icon:p,title:"Image"}}},{key:"tunes",get:function(){return[{name:"withBorder",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 9.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 5H14.5096"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.625 5H15C17.2091 5 19 6.79086 19 9V9.375"/><path stroke="currentColor" stroke-width="2" d="M9.375 5L9 5C6.79086 5 5 6.79086 5 9V9.375"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 5H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9.5H5.00957"/><path stroke="currentColor" stroke-width="2" d="M9.375 19H9C6.79086 19 5 17.2091 5 15V14.625"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 19H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14.55H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/></svg>',title:"With border",toggle:!0},{name:"stretched",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>',title:"Stretch image",toggle:!0},{name:"withBackground",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',title:"With background",toggle:!0}]}}]),d()(g,[{key:"render",value:function(){return this.ui.render(this.data)}},{key:"validate",value:function(u){return u.file&&u.file.url}},{key:"save",value:function(){var u=this.ui.nodes.caption;return this._data.caption=u.innerHTML,this.data}},{key:"renderSettings",value:function(){var u=this;return g.tunes.concat(this.config.actions).map(function(w){return{icon:w.icon,label:u.api.i18n.t(w.title),name:w.name,toggle:w.toggle,isActive:u.data[w.name],onActivate:function(){typeof w.action!="function"?u.tuneToggled(w.name):w.action(w.name)}}})}},{key:"appendCallback",value:function(){this.ui.nodes.fileButton.click()}},{key:"onPaste",value:(_=n()(o.a.mark(function u(w){var S,M,c,l,x;return o.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:T.t0=w.type,T.next=T.t0==="tag"?3:T.t0==="pattern"?15:T.t0==="file"?18:21;break;case 3:if(S=w.detail.data,!/^blob:/.test(S.src)){T.next=13;break}return T.next=7,fetch(S.src);case 7:return M=T.sent,T.next=10,M.blob();case 10:return c=T.sent,this.uploadFile(c),T.abrupt("break",21);case 13:return this.uploadUrl(S.src),T.abrupt("break",21);case 15:return l=w.detail.data,this.uploadUrl(l),T.abrupt("break",21);case 18:return x=w.detail.file,this.uploadFile(x),T.abrupt("break",21);case 21:case"end":return T.stop()}},u,this)})),function(u){return _.apply(this,arguments)})},{key:"onUpload",value:function(u){u.success&&u.file?this.image=u.file:this.uploadingFailed("incorrect response: "+JSON.stringify(u))}},{key:"uploadingFailed",value:function(u){console.log("Image Tool: uploading failed because of",u),this.api.notifier.show({message:this.api.i18n.t("Couldn’t upload image. Please try another."),style:"error"}),this.ui.hidePreloader()}},{key:"tuneToggled",value:function(u){this.setTune(u,!this._data[u])}},{key:"setTune",value:function(u,w){var S=this;this._data[u]=w,this.ui.applyTune(u,w),u==="stretched"&&Promise.resolve().then(function(){var M=S.api.blocks.getCurrentBlockIndex();S.api.blocks.stretchBlock(M,w)}).catch(function(M){console.error(M)})}},{key:"uploadFile",value:function(u){var w=this;this.uploader.uploadByFile(u,{onPreview:function(S){w.ui.showPreloader(S)}})}},{key:"uploadUrl",value:function(u){this.ui.showPreloader(u),this.uploader.uploadByUrl(u)}},{key:"data",set:function(u){var w=this;this.image=u.file,this._data.caption=u.caption||"",this.ui.fillCaption(this._data.caption),g.tunes.forEach(function(S){var M=S.name,c=u[M]!==void 0&&(u[M]===!0||u[M]==="true");w.setTune(M,c)})},get:function(){return this._data}},{key:"image",set:function(u){this._data.file=u||{},u&&u.url&&this.ui.fillImage(u.url)}}],[{key:"pasteConfig",get:function(){return{tags:[{img:{src:!0}}],patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png|svg|webp)(\?[a-z0-9=]*)?$/i},files:{mimeTypes:["image/*"]}}}}]),g}();/**
 * Image Tool for the Editor.js
 *
 * @author CodeX <team@codex.so>
 * @license MIT
 * @see {@link https://github.com/editor-js/image}
 *
 * To developers.
 * To simplify Tool structure, we split it to 4 parts:
 *  1) index.js — main Tool's interface, public API and methods for working with data
 *  2) uploader.js — module that has methods for sending files via AJAX: from device, by URL or File pasting
 *  3) ui.js — module for UI manipulations: render, showing preloader, etc
 *  4) tunes.js — working with Block Tunes: render buttons, handle clicks
 *
 * For debug purposes there is a testing server
 * that can save uploaded files and return a Response {@link UploadResponseFormat}
 *
 *       $ node dev/server.js
 *
 * It will expose 8008 port, so you can pass http://localhost:8008 with the Tools config:
 *
 * image: {
 *   class: ImageTool,
 *   config: {
 *     endpoints: {
 *       byFile: 'http://localhost:8008/uploadFile',
 *       byUrl: 'http://localhost:8008/fetchUrl',
 *     }
 *   },
 * },
 */}]).default})})(J);var z=J.exports;return $(z)});
