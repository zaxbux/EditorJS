(function(M,T){typeof exports=="object"&&typeof module<"u"?module.exports=T():typeof define=="function"&&define.amd?define(T):(M=typeof globalThis<"u"?globalThis:M||self,M.Underline=T())})(this,function(){"use strict";function M(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var T={exports:{}};(function(C,L){(function(m,y){C.exports=y()})(window,function(){return function(m){var y={};function a(t){if(y[t])return y[t].exports;var e=y[t]={i:t,l:!1,exports:{}};return m[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}return a.m=m,a.c=y,a.d=function(t,e,d){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:d})},a.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e||4&e&&typeof t=="object"&&t&&t.__esModule)return t;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:t}),2&e&&typeof t!="string")for(var i in t)a.d(d,i,function(s){return t[s]}.bind(null,i));return d},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a(a.s=4)}([function(m,y,a){var t=a(1),e=a(2);typeof(e=e.__esModule?e.default:e)=="string"&&(e=[[m.i,e,""]]);var d={insert:"head",singleton:!1};t(e,d),m.exports=e.locals||{}},function(m,y,a){var t,e=function(){return t===void 0&&(t=!!(window&&document&&document.all&&!window.atob)),t},d=function(){var n={};return function(o){if(n[o]===void 0){var r=document.querySelector(o);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}n[o]=r}return n[o]}}(),i=[];function s(n){for(var o=-1,r=0;r<i.length;r++)if(i[r].identifier===n){o=r;break}return o}function g(n,o){for(var r={},l=[],v=0;v<n.length;v++){var b=n[v],h=o.base?b[0]+o.base:b[0],k=r[h]||0,j="".concat(h," ").concat(k);r[h]=k+1;var P=s(j),E={css:b[1],media:b[2],sourceMap:b[3]};P!==-1?(i[P].references++,i[P].updater(E)):i.push({identifier:j,updater:O(E,o),references:1}),l.push(j)}return l}function p(n){var o=document.createElement("style"),r=n.attributes||{};if(r.nonce===void 0){var l=a.nc;l&&(r.nonce=l)}if(Object.keys(r).forEach(function(b){o.setAttribute(b,r[b])}),typeof n.insert=="function")n.insert(o);else{var v=d(n.insert||"head");if(!v)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");v.appendChild(o)}return o}var u,c=(u=[],function(n,o){return u[n]=o,u.filter(Boolean).join(`
`)});function f(n,o,r,l){var v=r?"":l.media?"@media ".concat(l.media," {").concat(l.css,"}"):l.css;if(n.styleSheet)n.styleSheet.cssText=c(o,v);else{var b=document.createTextNode(v),h=n.childNodes;h[o]&&n.removeChild(h[o]),h.length?n.insertBefore(b,h[o]):n.appendChild(b)}}function w(n,o,r){var l=r.css,v=r.media,b=r.sourceMap;if(v?n.setAttribute("media",v):n.removeAttribute("media"),b&&typeof btoa<"u"&&(l+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(b))))," */")),n.styleSheet)n.styleSheet.cssText=l;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(l))}}var S=null,x=0;function O(n,o){var r,l,v;if(o.singleton){var b=x++;r=S||(S=p(o)),l=f.bind(null,r,b,!1),v=f.bind(null,r,b,!0)}else r=p(o),l=w.bind(null,r,o),v=function(){(function(h){if(h.parentNode===null)return!1;h.parentNode.removeChild(h)})(r)};return l(n),function(h){if(h){if(h.css===n.css&&h.media===n.media&&h.sourceMap===n.sourceMap)return;l(n=h)}else v()}}m.exports=function(n,o){(o=o||{}).singleton||typeof o.singleton=="boolean"||(o.singleton=e());var r=g(n=n||[],o);return function(l){if(l=l||[],Object.prototype.toString.call(l)==="[object Array]"){for(var v=0;v<r.length;v++){var b=s(r[v]);i[b].references--}for(var h=g(l,o),k=0;k<r.length;k++){var j=s(r[k]);i[j].references===0&&(i[j].updater(),i.splice(j,1))}r=h}}}},function(m,y,a){(y=a(3)(!1)).push([m.i,`.cdx-underline {
    text-decoration: underline;
}
`,""]),m.exports=y},function(m,y,a){m.exports=function(t){var e=[];return e.toString=function(){return this.map(function(d){var i=function(s,g){var p=s[1]||"",u=s[3];if(!u)return p;if(g&&typeof btoa=="function"){var c=(w=u,S=btoa(unescape(encodeURIComponent(JSON.stringify(w)))),x="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(S),"/*# ".concat(x," */")),f=u.sources.map(function(O){return"/*# sourceURL=".concat(u.sourceRoot||"").concat(O," */")});return[p].concat(f).concat([c]).join(`
`)}var w,S,x;return[p].join(`
`)}(d,t);return d[2]?"@media ".concat(d[2]," {").concat(i,"}"):i}).join("")},e.i=function(d,i,s){typeof d=="string"&&(d=[[null,d,""]]);var g={};if(s)for(var p=0;p<this.length;p++){var u=this[p][0];u!=null&&(g[u]=!0)}for(var c=0;c<d.length;c++){var f=[].concat(d[c]);s&&g[f[0]]||(i&&(f[2]?f[2]="".concat(i," and ").concat(f[2]):f[2]=i),e.push(f))}},e}},function(m,y,a){a.r(y),a.d(y,"default",function(){return d}),a(0);function t(i){return(t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(i)}function e(i,s){for(var g=0;g<s.length;g++){var p=s[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(i,(u=p.key,c=void 0,c=function(f,w){if(t(f)!=="object"||f===null)return f;var S=f[Symbol.toPrimitive];if(S!==void 0){var x=S.call(f,w||"default");if(t(x)!=="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(f)}(u,"string"),t(c)==="symbol"?c:String(c)),p)}var u,c}var d=function(){function i(u){var c=u.api;(function(f,w){if(!(f instanceof w))throw new TypeError("Cannot call a class as a function")})(this,i),this.api=c,this.button=null,this.tag="U",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}var s,g,p;return s=i,p=[{key:"CSS",get:function(){return"cdx-underline"}},{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{u:{class:i.CSS}}}}],(g=[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}},{key:"surround",value:function(u){if(u){var c=this.api.selection.findParentTag(this.tag,i.CSS);c?this.unwrap(c):this.wrap(u)}}},{key:"wrap",value:function(u){var c=document.createElement(this.tag);c.classList.add(i.CSS),c.appendChild(u.extractContents()),u.insertNode(c),this.api.selection.expandToTag(c)}},{key:"unwrap",value:function(u){this.api.selection.expandToTag(u);var c=window.getSelection(),f=c.getRangeAt(0),w=f.extractContents();u.parentNode.removeChild(u),f.insertNode(w),c.removeAllRanges(),c.addRange(f)}},{key:"checkState",value:function(){var u=this.api.selection.findParentTag(this.tag,i.CSS);this.button.classList.toggle(this.iconClasses.active,!!u)}},{key:"toolboxIcon",get:function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7.5V11.5C9 12.2956 9.31607 13.0587 9.87868 13.6213C10.4413 14.1839 11.2044 14.5 12 14.5C12.7956 14.5 13.5587 14.1839 14.1213 13.6213C14.6839 13.0587 15 12.2956 15 11.5V7.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7.71429 18H16.2857"/></svg>'}}])&&e(s.prototype,g),p&&e(s,p),Object.defineProperty(s,"prototype",{writable:!1}),i}()}]).default})})(T);var N=T.exports;return M(N)});
